var An=Object.defineProperty;var ia=e=>{throw TypeError(e)};var En=(e,t,a)=>t in e?An(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var U=(e,t,a)=>En(e,typeof t!="symbol"?t+"":t,a),m0=(e,t,a)=>t.has(e)||ia("Cannot "+a);var oe=(e,t,a)=>(m0(e,t,"read from private field"),a?a.call(e):t.get(e)),ae=(e,t,a)=>t.has(e)?ia("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),je=(e,t,a,n)=>(m0(e,t,"write to private field"),n?n.call(e,a):t.set(e,a),a),G=(e,t,a)=>(m0(e,t,"access private method"),a);import{g,h as A,c as Mn,w as Cn,S as On,p as Un,r as Sn,a as sa,b as _n,n as Ye,d as Ca,u as g0,s as Oa,e as m,k as ze,f as ce,i as Rn,t as s0,j as F,l as pt,A as Pn,m as u0,o as ye,q as Nn,v as Ln,x as w0,T as kn,y as xa,z as ca,B as ge,C as Ua,D as H0,E as Dn,F as ht,G as Sa,H as Bn,I as z0,J as G0,K as Bt,L as de,M as $t,N as _a,O as $n,P as Vn,V as Kn,Q as Hn,R as Vt,U as Ra,W as Pa,X as x0,Z as y0,Y as O0,_ as U0,$ as zn,a0 as Gn}from"./index-Czc7ylmt.js";function Wn(e){const t=g(e,"randomBytes");t[6]=t[6]&15|64,t[8]=t[8]&63|128;const a=A(t);return[a.substring(2,10),a.substring(10,14),a.substring(14,18),a.substring(18,22),a.substring(22,34)].join("-")}let Na=!1;const La=function(e,t,a){return Mn(e,t).update(a).digest()};let ka=La;function It(e,t,a){const n=g(t,"key"),r=g(a,"data");return A(ka(e,n,r))}It._=La;It.lock=function(){Na=!0};It.register=function(e){if(Na)throw new Error("computeHmac is locked");ka=e};Object.freeze(It);const jn=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Da=Uint8Array.from({length:16},(e,t)=>t),Yn=Da.map(e=>(9*e+5)%16);let W0=[Da],j0=[Yn];for(let e=0;e<4;e++)for(let t of[W0,j0])t.push(t[e].map(a=>jn[a]));const Ba=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),qn=W0.map((e,t)=>e.map(a=>Ba[t][a])),Fn=j0.map((e,t)=>e.map(a=>Ba[t][a])),Xn=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Jn=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),qt=(e,t)=>e<<t|e>>>32-t;function da(e,t,a,n){return e===0?t^a^n:e===1?t&a|~t&n:e===2?(t|~a)^n:e===3?t&n|a&~n:t^(a|~n)}const Ft=new Uint32Array(16);class Zn extends On{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:a,h2:n,h3:r,h4:i}=this;return[t,a,n,r,i]}set(t,a,n,r,i){this.h0=t|0,this.h1=a|0,this.h2=n|0,this.h3=r|0,this.h4=i|0}process(t,a){for(let u=0;u<16;u++,a+=4)Ft[u]=t.getUint32(a,!0);let n=this.h0|0,r=n,i=this.h1|0,s=i,x=this.h2|0,c=x,d=this.h3|0,f=d,b=this.h4|0,y=b;for(let u=0;u<5;u++){const E=4-u,h=Xn[u],R=Jn[u],w=W0[u],L=j0[u],J=qn[u],fe=Fn[u];for(let O=0;O<16;O++){const $=qt(n+da(u,i,x,d)+Ft[w[O]]+h,J[O])+b|0;n=b,b=d,d=qt(x,10)|0,x=i,i=$}for(let O=0;O<16;O++){const $=qt(r+da(E,s,c,f)+Ft[L[O]]+R,fe[O])+y|0;r=y,y=f,f=qt(c,10)|0,c=s,s=$}}this.set(this.h1+x+f|0,this.h2+d+y|0,this.h3+b+r|0,this.h4+n+s|0,this.h0+i+c|0)}roundClean(){Ft.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Qn=Cn(()=>new Zn);let $a=!1;const Va=function(e){return Qn(e)};let Ka=Va;function vt(e){const t=g(e,"data");return A(Ka(t))}vt._=Va;vt.lock=function(){$a=!0};vt.register=function(e){if($a)throw new TypeError("ripemd160 is locked");Ka=e};Object.freeze(vt);let Ha=!1;const za=function(e,t,a,n,r){return Un(e,t,a,n,r)};let Ga=za;function we(e,t,a,n,r){const i=g(e,"password"),s=g(t,"salt");return A(Ga(i,s,a,n,r))}we._=za;we.lock=function(){Ha=!0};we.register=function(e){if(Ha)throw new Error("pbkdf2 is locked");Ga=e};Object.freeze(we);let Wa=!1;const ja=function(e){return new Uint8Array(Sn(e))};let Ya=ja;function ee(e){return Ya(e)}ee._=ja;ee.lock=function(){Wa=!0};ee.register=function(e){if(Wa)throw new Error("randomBytes is locked");Ya=e};Object.freeze(ee);const I=(e,t)=>e<<t|e>>>32-t;function fa(e,t,a,n,r,i){let s=e[t++]^a[n++],x=e[t++]^a[n++],c=e[t++]^a[n++],d=e[t++]^a[n++],f=e[t++]^a[n++],b=e[t++]^a[n++],y=e[t++]^a[n++],u=e[t++]^a[n++],E=e[t++]^a[n++],h=e[t++]^a[n++],R=e[t++]^a[n++],w=e[t++]^a[n++],L=e[t++]^a[n++],J=e[t++]^a[n++],fe=e[t++]^a[n++],O=e[t++]^a[n++],$=s,te=x,Ie=c,ve=d,Te=f,Ae=b,Ee=y,Me=u,Ce=E,Oe=h,Ue=R,Se=w,_e=L,Re=J,Pe=fe,Ne=O;for(let ra=0;ra<8;ra+=2)Te^=I($+_e|0,7),Ce^=I(Te+$|0,9),_e^=I(Ce+Te|0,13),$^=I(_e+Ce|0,18),Oe^=I(Ae+te|0,7),Re^=I(Oe+Ae|0,9),te^=I(Re+Oe|0,13),Ae^=I(te+Re|0,18),Pe^=I(Ue+Ee|0,7),Ie^=I(Pe+Ue|0,9),Ee^=I(Ie+Pe|0,13),Ue^=I(Ee+Ie|0,18),ve^=I(Ne+Se|0,7),Me^=I(ve+Ne|0,9),Se^=I(Me+ve|0,13),Ne^=I(Se+Me|0,18),te^=I($+ve|0,7),Ie^=I(te+$|0,9),ve^=I(Ie+te|0,13),$^=I(ve+Ie|0,18),Ee^=I(Ae+Te|0,7),Me^=I(Ee+Ae|0,9),Te^=I(Me+Ee|0,13),Ae^=I(Te+Me|0,18),Se^=I(Ue+Oe|0,7),Ce^=I(Se+Ue|0,9),Oe^=I(Ce+Se|0,13),Ue^=I(Oe+Ce|0,18),_e^=I(Ne+Pe|0,7),Re^=I(_e+Ne|0,9),Pe^=I(Re+_e|0,13),Ne^=I(Pe+Re|0,18);r[i++]=s+$|0,r[i++]=x+te|0,r[i++]=c+Ie|0,r[i++]=d+ve|0,r[i++]=f+Te|0,r[i++]=b+Ae|0,r[i++]=y+Ee|0,r[i++]=u+Me|0,r[i++]=E+Ce|0,r[i++]=h+Oe|0,r[i++]=R+Ue|0,r[i++]=w+Se|0,r[i++]=L+_e|0,r[i++]=J+Re|0,r[i++]=fe+Pe|0,r[i++]=O+Ne|0}function lt(e,t,a,n,r){let i=n+0,s=n+16*r;for(let x=0;x<16;x++)a[s+x]=e[t+(2*r-1)*16+x];for(let x=0;x<r;x++,i+=16,t+=16)fa(a,s,e,t,a,i),x>0&&(s+=16),fa(a,i,e,t+=16,a,s)}function qa(e,t,a){const n=_n({dkLen:32,asyncTick:10,maxmem:1073742848},a),{N:r,r:i,p:s,dkLen:x,asyncTick:c,maxmem:d,onProgress:f}=n;if(Ye(r),Ye(i),Ye(s),Ye(x),Ye(c),Ye(d),f!==void 0&&typeof f!="function")throw new Error("progressCb should be function");const b=128*i,y=b/4;if(r<=1||r&r-1||r>=2**(b/8)||r>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(s<0||s>(2**32-1)*32/b)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(x<0||x>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const u=b*(r+s);if(u>d)throw new Error(`Scrypt: parameters too large, ${u} (128 * r * (N + p)) > ${d} (maxmem)`);const E=Ca(Oa,e,t,{c:1,dkLen:b*s}),h=g0(E),R=g0(new Uint8Array(b*r)),w=g0(new Uint8Array(b));let L=()=>{};if(f){const J=2*r*s,fe=Math.max(Math.floor(J/1e4),1);let O=0;L=()=>{O++,f&&(!(O%fe)||O===J)&&f(O/J)}}return{N:r,r:i,p:s,dkLen:x,blockSize32:y,V:R,B32:h,B:E,tmp:w,blockMixCb:L,asyncTick:c}}function Fa(e,t,a,n,r){const i=Ca(Oa,e,a,{c:1,dkLen:t});return a.fill(0),n.fill(0),r.fill(0),i}function er(e,t,a){const{N:n,r,p:i,dkLen:s,blockSize32:x,V:c,B32:d,B:f,tmp:b,blockMixCb:y}=qa(e,t,a);for(let u=0;u<i;u++){const E=x*u;for(let h=0;h<x;h++)c[h]=d[E+h];for(let h=0,R=0;h<n-1;h++)lt(c,R,c,R+=x,r),y();lt(c,(n-1)*x,d,E,r),y();for(let h=0;h<n;h++){const R=d[E+x-16]%n;for(let w=0;w<x;w++)b[w]=d[E+w]^c[R*x+w];lt(b,0,d,E,r),y()}}return Fa(e,s,f,c,b)}async function tr(e,t,a){const{N:n,r,p:i,dkLen:s,blockSize32:x,V:c,B32:d,B:f,tmp:b,blockMixCb:y,asyncTick:u}=qa(e,t,a);for(let E=0;E<i;E++){const h=x*E;for(let w=0;w<x;w++)c[w]=d[h+w];let R=0;await sa(n-1,u,()=>{lt(c,R,c,R+=x,r),y()}),lt(c,(n-1)*x,d,h,r),y(),await sa(n,u,()=>{const w=d[h+x-16]%n;for(let L=0;L<x;L++)b[L]=d[h+L]^c[w*x+L];lt(b,0,d,h,r),y()})}return Fa(e,s,f,c,b)}let Xa=!1,Ja=!1;const Za=async function(e,t,a,n,r,i,s){return await tr(e,t,{N:a,r:n,p:r,dkLen:i,onProgress:s})},Qa=function(e,t,a,n,r,i){return er(e,t,{N:a,r:n,p:r,dkLen:i})};let en=Za,tn=Qa;async function Tt(e,t,a,n,r,i,s){const x=g(e,"passwd"),c=g(t,"salt");return A(await en(x,c,a,n,r,i,s))}Tt._=Za;Tt.lock=function(){Ja=!0};Tt.register=function(e){if(Ja)throw new Error("scrypt is locked");en=e};Object.freeze(Tt);function At(e,t,a,n,r,i){const s=g(e,"passwd"),x=g(t,"salt");return A(tn(s,x,a,n,r,i))}At._=Qa;At.lock=function(){Xa=!0};At.register=function(e){if(Xa)throw new Error("scryptSync is locked");tn=e};Object.freeze(At);const ar=`Ethereum Signed Message:
`;function nr(e){return m(typeof e.address=="string","invalid address for hashAuthorization","auth.address",e),ze(ce(["0x05",Rn([e.chainId!=null?s0(e.chainId):"0x",F(e.address),e.nonce!=null?s0(e.nonce):"0x"])]))}function rr(e){return typeof e=="string"&&(e=pt(e)),ze(ce([pt(ar),pt(String(e.length)),e]))}var ut;const na=class na extends Pn{constructor(a,n){super(n);U(this,"address");ae(this,ut);m(a&&typeof a.sign=="function","invalid private key","privateKey","[ REDACTED ]"),je(this,ut,a);const r=u0(this.signingKey.publicKey);ye(this,{address:r})}get signingKey(){return oe(this,ut)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(a){return new na(oe(this,ut),a)}async signTransaction(a){a=Nn(a);const{to:n,from:r}=await Ln({to:a.to?w0(a.to,this):void 0,from:a.from?w0(a.from,this):void 0});n!=null&&(a.to=n),r!=null&&(a.from=r),a.from!=null&&(m(F(a.from)===this.address,"transaction from address mismatch","tx.from",a.from),delete a.from);const i=kn.from(a);return i.signature=this.signingKey.sign(i.unsignedHash),i.serialized}async signMessage(a){return this.signMessageSync(a)}signMessageSync(a){return this.signingKey.sign(rr(a)).serialized}authorizeSync(a){m(typeof a.address=="string","invalid address for authorizeSync","auth.address",a);const n=this.signingKey.sign(nr(a));return Object.assign({},{address:F(a.address),nonce:xa(a.nonce||0),chainId:xa(a.chainId||0)},{signature:n})}async authorize(a){return a=Object.assign({},a,{address:await w0(a.address,this)}),this.authorizeSync(await this.populateAuthorization(a))}async signTypedData(a,n,r){const i=await ca.resolveNames(a,n,r,async s=>{ge(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:s}});const x=await this.provider.resolveName(s);return ge(x!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:s}),x});return this.signingKey.sign(ca.hash(i.domain,n,i.value)).serialized}};ut=new WeakMap;let c0=na;const d0=" !#$%&'()*+,-./<=>?@[]^_`{|}~",ir=/^[a-z]*$/i;function oa(e,t){let a=97;return e.reduce((n,r)=>(r===t?a++:r.match(ir)?n.push(String.fromCharCode(a)+r):(a=97,n.push(r)),n),[])}function sr(e,t){for(let r=d0.length-1;r>=0;r--)e=e.split(d0[r]).join(t.substring(2*r,2*r+2));const a=[],n=e.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(r,i,s,x)=>{if(s)for(let c=parseInt(s);c>=0;c--)a.push(";");else a.push(i.toLowerCase());return""});if(n)throw new Error(`leftovers: ${JSON.stringify(n)}`);return oa(oa(a,";"),":")}function xr(e){return m(e[0]==="0","unsupported auwl data","data",e),sr(e.substring(1+2*d0.length),e.substring(1,1+2*d0.length))}class cr{constructor(t){U(this,"locale");ye(this,{locale:t})}split(t){return t.toLowerCase().split(/\s+/g)}join(t){return t.join(" ")}}var yt,zt,Ke,Gt,S0;class dr extends cr{constructor(a,n,r){super(a);ae(this,Gt);ae(this,yt);ae(this,zt);ae(this,Ke);je(this,yt,n),je(this,zt,r),je(this,Ke,null)}get _data(){return oe(this,yt)}_decodeWords(){return xr(oe(this,yt))}getWord(a){const n=G(this,Gt,S0).call(this);return m(a>=0&&a<n.length,`invalid word index: ${a}`,"index",a),n[a]}getWordIndex(a){return G(this,Gt,S0).call(this).indexOf(a)}}yt=new WeakMap,zt=new WeakMap,Ke=new WeakMap,Gt=new WeakSet,S0=function(){if(oe(this,Ke)==null){const a=this._decodeWords();if(Ua(a.join(`
`)+`
`)!==oe(this,zt))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);je(this,Ke,a)}return oe(this,Ke)};const fr="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",or="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let I0=null;class Ge extends dr{constructor(){super("en",fr,or)}static wordlist(){return I0==null&&(I0=new Ge),I0}}function an(e){return(1<<e)-1<<8-e&255}function br(e){return(1<<e)-1&255}function v0(e,t){Dn("NFKD"),t==null&&(t=Ge.wordlist());const a=t.split(e);m(a.length%3===0&&a.length>=12&&a.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const n=new Uint8Array(Math.ceil(11*a.length/8));let r=0;for(let d=0;d<a.length;d++){let f=t.getWordIndex(a[d].normalize("NFKD"));m(f>=0,`invalid mnemonic word at index ${d}`,"mnemonic","[ REDACTED ]");for(let b=0;b<11;b++)f&1<<10-b&&(n[r>>3]|=1<<7-r%8),r++}const i=32*a.length/3,s=a.length/3,x=an(s),c=g(ht(n.slice(0,i/8)))[0]&x;return m(c===(n[n.length-1]&x),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),A(n.slice(0,i/8))}function T0(e,t){m(e.length%4===0&&e.length>=16&&e.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),t==null&&(t=Ge.wordlist());const a=[0];let n=11;for(let s=0;s<e.length;s++)n>8?(a[a.length-1]<<=8,a[a.length-1]|=e[s],n-=8):(a[a.length-1]<<=n,a[a.length-1]|=e[s]>>8-n,a.push(e[s]&br(8-n)),n+=3);const r=e.length/4,i=parseInt(ht(e).substring(2,4),16)&an(r);return a[a.length-1]<<=r,a[a.length-1]|=i>>8-r,t.join(a.map(s=>t.getWord(s)))}const A0={};class mt{constructor(t,a,n,r,i){U(this,"phrase");U(this,"password");U(this,"wordlist");U(this,"entropy");r==null&&(r=""),i==null&&(i=Ge.wordlist()),H0(t,A0,"Mnemonic"),ye(this,{phrase:n,password:r,wordlist:i,entropy:a})}computeSeed(){const t=pt("mnemonic"+this.password,"NFKD");return we(pt(this.phrase,"NFKD"),t,2048,64,"sha512")}static fromPhrase(t,a,n){const r=v0(t,n);return t=T0(g(r),n),new mt(A0,r,t,a,n)}static fromEntropy(t,a,n){const r=g(t,"entropy"),i=T0(r,n);return new mt(A0,A(r),i,a,n)}static entropyToPhrase(t,a){const n=g(t,"entropy");return T0(n,a)}static phraseToEntropy(t,a){return v0(t,a)}static isValidMnemonic(t,a){try{return v0(t,a),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var P=function(e,t,a,n){if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?n:a==="a"?n.call(e):n?n.value:t.get(e)},E0=function(e,t,a,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(e,a):r?r.value=a:t.set(e,a),a},e0,H,Z;const pr={16:10,24:12,32:14},lr=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],V=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Xt=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],ur=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],yr=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],hr=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],mr=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],gr=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],wr=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],Ir=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],vr=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Tr=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Ar=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Er=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Mr=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function M0(e){const t=[];for(let a=0;a<e.length;a+=4)t.push(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]);return t}class Y0{get key(){return P(this,e0,"f").slice()}constructor(t){if(e0.set(this,void 0),H.set(this,void 0),Z.set(this,void 0),!(this instanceof Y0))throw Error("AES must be instanitated with `new`");E0(this,e0,new Uint8Array(t),"f");const a=pr[this.key.length];if(a==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");E0(this,Z,[],"f"),E0(this,H,[],"f");for(let f=0;f<=a;f++)P(this,Z,"f").push([0,0,0,0]),P(this,H,"f").push([0,0,0,0]);const n=(a+1)*4,r=this.key.length/4,i=M0(this.key);let s;for(let f=0;f<r;f++)s=f>>2,P(this,Z,"f")[s][f%4]=i[f],P(this,H,"f")[a-s][f%4]=i[f];let x=0,c=r,d;for(;c<n;){if(d=i[r-1],i[0]^=V[d>>16&255]<<24^V[d>>8&255]<<16^V[d&255]<<8^V[d>>24&255]^lr[x]<<24,x+=1,r!=8)for(let u=1;u<r;u++)i[u]^=i[u-1];else{for(let u=1;u<r/2;u++)i[u]^=i[u-1];d=i[r/2-1],i[r/2]^=V[d&255]^V[d>>8&255]<<8^V[d>>16&255]<<16^V[d>>24&255]<<24;for(let u=r/2+1;u<r;u++)i[u]^=i[u-1]}let f=0,b,y;for(;f<r&&c<n;)b=c>>2,y=c%4,P(this,Z,"f")[b][y]=i[f],P(this,H,"f")[a-b][y]=i[f++],c++}for(let f=1;f<a;f++)for(let b=0;b<4;b++)d=P(this,H,"f")[f][b],P(this,H,"f")[f][b]=Tr[d>>24&255]^Ar[d>>16&255]^Er[d>>8&255]^Mr[d&255]}encrypt(t){if(t.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const a=P(this,Z,"f").length-1,n=[0,0,0,0];let r=M0(t);for(let x=0;x<4;x++)r[x]^=P(this,Z,"f")[0][x];for(let x=1;x<a;x++){for(let c=0;c<4;c++)n[c]=ur[r[c]>>24&255]^yr[r[(c+1)%4]>>16&255]^hr[r[(c+2)%4]>>8&255]^mr[r[(c+3)%4]&255]^P(this,Z,"f")[x][c];r=n.slice()}const i=new Uint8Array(16);let s=0;for(let x=0;x<4;x++)s=P(this,Z,"f")[a][x],i[4*x]=(V[r[x]>>24&255]^s>>24)&255,i[4*x+1]=(V[r[(x+1)%4]>>16&255]^s>>16)&255,i[4*x+2]=(V[r[(x+2)%4]>>8&255]^s>>8)&255,i[4*x+3]=(V[r[(x+3)%4]&255]^s)&255;return i}decrypt(t){if(t.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const a=P(this,H,"f").length-1,n=[0,0,0,0];let r=M0(t);for(let x=0;x<4;x++)r[x]^=P(this,H,"f")[0][x];for(let x=1;x<a;x++){for(let c=0;c<4;c++)n[c]=gr[r[c]>>24&255]^wr[r[(c+3)%4]>>16&255]^Ir[r[(c+2)%4]>>8&255]^vr[r[(c+1)%4]&255]^P(this,H,"f")[x][c];r=n.slice()}const i=new Uint8Array(16);let s=0;for(let x=0;x<4;x++)s=P(this,H,"f")[a][x],i[4*x]=(Xt[r[x]>>24&255]^s>>24)&255,i[4*x+1]=(Xt[r[(x+3)%4]>>16&255]^s>>16)&255,i[4*x+2]=(Xt[r[(x+2)%4]>>8&255]^s>>8)&255,i[4*x+3]=(Xt[r[(x+1)%4]&255]^s)&255;return i}}e0=new WeakMap,H=new WeakMap,Z=new WeakMap;class nn{constructor(t,a,n){if(n&&!(this instanceof n))throw new Error(`${t} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new Y0(a)},name:{enumerable:!0,value:t}})}}var Jt=function(e,t,a,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(e,a):r?r.value=a:t.set(e,a),a},qe=function(e,t,a,n){if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?n:a==="a"?n.call(e):n?n.value:t.get(e)},Ct,ne;class q0 extends nn{constructor(t,a){if(super("ECC",t,q0),Ct.set(this,void 0),ne.set(this,void 0),a){if(a.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");Jt(this,Ct,new Uint8Array(a),"f")}else Jt(this,Ct,new Uint8Array(16),"f");Jt(this,ne,this.iv,"f")}get iv(){return new Uint8Array(qe(this,Ct,"f"))}encrypt(t){if(t.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const a=new Uint8Array(t.length);for(let n=0;n<t.length;n+=16){for(let r=0;r<16;r++)qe(this,ne,"f")[r]^=t[n+r];Jt(this,ne,this.aes.encrypt(qe(this,ne,"f")),"f"),a.set(qe(this,ne,"f"),n)}return a}decrypt(t){if(t.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const a=new Uint8Array(t.length);for(let n=0;n<t.length;n+=16){const r=this.aes.decrypt(t.subarray(n,n+16));for(let i=0;i<16;i++)a[n+i]=r[i]^qe(this,ne,"f")[i],qe(this,ne,"f")[i]=t[n+i]}return a}}Ct=new WeakMap,ne=new WeakMap;var Fe=function(e,t,a,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(e,a):r?r.value=a:t.set(e,a),a},K=function(e,t,a,n){if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?n:a==="a"?n.call(e):n?n.value:t.get(e)},Ot,De,z;class gt extends nn{constructor(t,a){super("CTR",t,gt),Ot.set(this,void 0),De.set(this,void 0),z.set(this,void 0),Fe(this,z,new Uint8Array(16),"f"),K(this,z,"f").fill(0),Fe(this,Ot,K(this,z,"f"),"f"),Fe(this,De,16,"f"),a==null&&(a=1),typeof a=="number"?this.setCounterValue(a):this.setCounterBytes(a)}get counter(){return new Uint8Array(K(this,z,"f"))}setCounterValue(t){if(!Number.isInteger(t)||t<0||t>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let a=15;a>=0;--a)K(this,z,"f")[a]=t%256,t=Math.floor(t/256)}setCounterBytes(t){if(t.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");K(this,z,"f").set(t)}increment(){for(let t=15;t>=0;t--)if(K(this,z,"f")[t]===255)K(this,z,"f")[t]=0;else{K(this,z,"f")[t]++;break}}encrypt(t){var a,n;const r=new Uint8Array(t);for(let i=0;i<r.length;i++)K(this,De,"f")===16&&(Fe(this,Ot,this.aes.encrypt(K(this,z,"f")),"f"),Fe(this,De,0,"f"),this.increment()),r[i]^=K(this,Ot,"f")[Fe(this,De,(n=K(this,De,"f"),a=n++,n),"f"),a];return r}decrypt(t){return this.encrypt(t)}}Ot=new WeakMap,De=new WeakMap,z=new WeakMap;function Cr(e){if(e.length<16)throw new TypeError("PKCS#7 invalid length");const t=e[e.length-1];if(t>16)throw new TypeError("PKCS#7 padding byte out of range");const a=e.length-t;for(let n=0;n<t;n++)if(e[a+n]!==t)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(e.subarray(0,a))}function rn(e){return typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e),Sa(e)}function Et(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function Yt(e){return typeof e=="string"?pt(e,"NFKC"):Sa(e)}function _(e,t){const a=t.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);m(a!=null,"invalid path","path",t);const n=a[1],r=a[3],i=a[4]==="!";let s=e;for(const x of n.toLowerCase().split(".")){if(Array.isArray(s)){if(!x.match(/^[0-9]+$/))break;s=s[parseInt(x)]}else if(typeof s=="object"){let c=null;for(const d in s)if(d.toLowerCase()===x){c=s[d];break}s=c}else s=null;if(s==null)break}if(m(!i||s!=null,"missing required value","path",n),r&&s!=null){if(r==="int"){if(typeof s=="string"&&s.match(/^-?[0-9]+$/))return parseInt(s);if(Number.isSafeInteger(s))return s}if(r==="number"&&typeof s=="string"&&s.match(/^-?[0-9.]*$/))return parseFloat(s);if(r==="data"&&typeof s=="string")return rn(s);if(r==="array"&&Array.isArray(s)||r===typeof s)return s;m(!1,`wrong type found for ${r} `,"path",n)}return s}const sn="m/44'/60'/0'/0/0";function ba(e){try{const t=JSON.parse(e);if((t.version!=null?parseInt(t.version):0)===3)return!0}catch{}return!1}function Or(e,t,a){if(_(e,"crypto.cipher:string")==="aes-128-ctr"){const r=_(e,"crypto.cipherparams.iv:data!"),i=new gt(t,r);return A(i.decrypt(a))}ge(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function f0(e,t){const a=g(t),n=_(e,"crypto.ciphertext:data!"),r=A(ze(ce([a.slice(16,32),n]))).substring(2);m(r===_(e,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const i=Or(e,a.slice(0,16),n),s=u0(i);if(e.address){let d=e.address.toLowerCase();d.startsWith("0x")||(d="0x"+d),m(F(d)===s,"keystore address/privateKey mismatch","address",e.address)}const x={address:s,privateKey:i};if(_(e,"x-ethers.version:string")==="0.1"){const d=a.slice(32,64),f=_(e,"x-ethers.mnemonicCiphertext:data!"),b=_(e,"x-ethers.mnemonicCounter:data!"),y=new gt(d,b);x.mnemonic={path:_(e,"x-ethers.path:string")||sn,locale:_(e,"x-ethers.locale:string")||"en",entropy:A(g(y.decrypt(f)))}}return x}function xn(e){const t=_(e,"crypto.kdf:string");if(t&&typeof t=="string"){if(t.toLowerCase()==="scrypt"){const a=_(e,"crypto.kdfparams.salt:data!"),n=_(e,"crypto.kdfparams.n:int!"),r=_(e,"crypto.kdfparams.r:int!"),i=_(e,"crypto.kdfparams.p:int!");m(n>0&&(n&n-1)===0,"invalid kdf.N","kdf.N",n),m(r>0&&i>0,"invalid kdf","kdf",t);const s=_(e,"crypto.kdfparams.dklen:int!");return m(s===32,"invalid kdf.dklen","kdf.dflen",s),{name:"scrypt",salt:a,N:n,r,p:i,dkLen:64}}else if(t.toLowerCase()==="pbkdf2"){const a=_(e,"crypto.kdfparams.salt:data!"),n=_(e,"crypto.kdfparams.prf:string!"),r=n.split("-").pop();m(r==="sha256"||r==="sha512","invalid kdf.pdf","kdf.pdf",n);const i=_(e,"crypto.kdfparams.c:int!"),s=_(e,"crypto.kdfparams.dklen:int!");return m(s===32,"invalid kdf.dklen","kdf.dklen",s),{name:"pbkdf2",salt:a,count:i,dkLen:s,algorithm:r}}}m(!1,"unsupported key-derivation function","kdf",t)}function Ur(e,t){const a=JSON.parse(e),n=Yt(t),r=xn(a);if(r.name==="pbkdf2"){const{salt:b,count:y,dkLen:u,algorithm:E}=r,h=we(n,b,y,u,E);return f0(a,h)}ge(r.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:r});const{salt:i,N:s,r:x,p:c,dkLen:d}=r,f=At(n,i,s,x,c,d);return f0(a,f)}function pa(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}async function Sr(e,t,a){const n=JSON.parse(e),r=Yt(t),i=xn(n);if(i.name==="pbkdf2"){a&&(a(0),await pa(0));const{salt:y,count:u,dkLen:E,algorithm:h}=i,R=we(r,y,u,E,h);return a&&(a(1),await pa(0)),f0(n,R)}ge(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:x,r:c,p:d,dkLen:f}=i,b=await Tt(r,s,x,c,d,f,a);return f0(n,b)}function cn(e){const t=e.salt!=null?g(e.salt,"options.salt"):ee(32);let a=1<<17,n=8,r=1;return e.scrypt&&(e.scrypt.N&&(a=e.scrypt.N),e.scrypt.r&&(n=e.scrypt.r),e.scrypt.p&&(r=e.scrypt.p)),m(typeof a=="number"&&a>0&&Number.isSafeInteger(a)&&(BigInt(a)&BigInt(a-1))===BigInt(0),"invalid scrypt N parameter","options.N",a),m(typeof n=="number"&&n>0&&Number.isSafeInteger(n),"invalid scrypt r parameter","options.r",n),m(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt p parameter","options.p",r),{name:"scrypt",dkLen:32,salt:t,N:a,r:n,p:r}}function dn(e,t,a,n){const r=g(a.privateKey,"privateKey"),i=n.iv!=null?g(n.iv,"options.iv"):ee(16);m(i.length===16,"invalid options.iv length","options.iv",n.iv);const s=n.uuid!=null?g(n.uuid,"options.uuid"):ee(16);m(s.length===16,"invalid options.uuid length","options.uuid",n.iv);const x=e.slice(0,16),c=e.slice(16,32),d=new gt(x,i),f=g(d.encrypt(r)),b=ze(ce([c,f])),y={address:a.address.substring(2).toLowerCase(),id:Wn(s),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:A(i).substring(2)},ciphertext:A(f).substring(2),kdf:"scrypt",kdfparams:{salt:A(t.salt).substring(2),n:t.N,dklen:32,p:t.p,r:t.r},mac:b.substring(2)}};if(a.mnemonic){const u=n.client!=null?n.client:`ethers/${Bn}`,E=a.mnemonic.path||sn,h=a.mnemonic.locale||"en",R=e.slice(32,64),w=g(a.mnemonic.entropy,"account.mnemonic.entropy"),L=ee(16),J=new gt(R,L),fe=g(J.encrypt(w)),O=new Date,te="UTC--"+(O.getUTCFullYear()+"-"+Et(O.getUTCMonth()+1,2)+"-"+Et(O.getUTCDate(),2)+"T"+Et(O.getUTCHours(),2)+"-"+Et(O.getUTCMinutes(),2)+"-"+Et(O.getUTCSeconds(),2)+".0Z")+"--"+y.address;y["x-ethers"]={client:u,gethFilename:te,path:E,locale:h,mnemonicCounter:A(L).substring(2),mnemonicCiphertext:A(fe).substring(2),version:"0.1"}}return JSON.stringify(y)}function fn(e,t,a){a==null&&(a={});const n=Yt(t),r=cn(a),i=At(n,r.salt,r.N,r.r,r.p,64);return dn(g(i),r,e,a)}async function on(e,t,a){a==null&&(a={});const n=Yt(t),r=cn(a),i=await Tt(n,r.salt,r.N,r.r,r.p,64,a.progressCallback);return dn(g(i),r,e,a)}const C0="m/44'/60'/0'/0/0",_r=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),he=2147483648,Rr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Pr="0123456789abcdef";function o0(e,t){let a="";for(;e;)a=Pr[e%16]+a,e=Math.trunc(e/16);for(;a.length<t*2;)a="0"+a;return"0x"+a}function _0(e){const t=g(e),a=z0(ht(ht(t)),0,4),n=ce([t,a]);return Vn(n)}const Q={};function bn(e,t,a,n){const r=new Uint8Array(37);e&he?(ge(n!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),r.set(g(n),1)):r.set(g(a));for(let s=24;s>=0;s-=8)r[33+(s>>3)]=e>>24-s&255;const i=g(It("sha512",t,r));return{IL:i.slice(0,32),IR:i.slice(32)}}function pn(e,t){const a=t.split("/");m(a.length>0,"invalid path","path",t),a[0]==="m"&&(m(e.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${e.depth}`,"path",t),a.shift());let n=e;for(let r=0;r<a.length;r++){const i=a[r];if(i.match(/^[0-9]+'$/)){const s=parseInt(i.substring(0,i.length-1));m(s<he,"invalid path index",`path[${r}]`,i),n=n.deriveChild(he+s)}else if(i.match(/^[0-9]+$/)){const s=parseInt(i);m(s<he,"invalid path index",`path[${r}]`,i),n=n.deriveChild(s)}else m(!1,"invalid path component",`path[${r}]`,i)}return n}var Wt,R0,He,Ut;const q=class q extends c0{constructor(a,n,r,i,s,x,c,d,f){super(n,f);ae(this,Wt);U(this,"publicKey");U(this,"fingerprint");U(this,"parentFingerprint");U(this,"mnemonic");U(this,"chainCode");U(this,"path");U(this,"index");U(this,"depth");H0(a,Q,"HDNodeWallet"),ye(this,{publicKey:n.compressedPublicKey});const b=z0(vt(ht(this.publicKey)),0,4);ye(this,{parentFingerprint:r,fingerprint:b,chainCode:i,path:s,index:x,depth:c}),ye(this,{mnemonic:d})}connect(a){return new q(Q,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,a)}async encrypt(a,n){return await on(G(this,Wt,R0).call(this),a,{progressCallback:n})}encryptSync(a){return fn(G(this,Wt,R0).call(this),a)}get extendedKey(){return ge(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),_0(ce(["0x0488ADE4",o0(this.depth,1),this.parentFingerprint,o0(this.index,4),this.chainCode,ce(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new Ht(Q,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(a){const n=G0(a,"index");m(n<=4294967295,"invalid index","index",n);let r=this.path;r&&(r+="/"+(n&~he),n&he&&(r+="'"));const{IR:i,IL:s}=bn(n,this.chainCode,this.publicKey,this.privateKey),x=new Bt(de(($t(s)+BigInt(this.privateKey))%Rr,32));return new q(Q,x,this.fingerprint,A(i),r,n,this.depth+1,this.mnemonic,this.provider)}derivePath(a){return pn(this,a)}static fromExtendedKey(a){const n=s0($n(a));m(n.length===82||_0(n.slice(0,78))===a,"invalid extended key","extendedKey","[ REDACTED ]");const r=n[4],i=A(n.slice(5,9)),s=parseInt(A(n.slice(9,13)).substring(2),16),x=A(n.slice(13,45)),c=n.slice(45,78);switch(A(n.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const d=A(c);return new Ht(Q,u0(d),d,i,x,null,s,r,null)}case"0x0488ade4":case"0x04358394 ":if(c[0]!==0)break;return new q(Q,new Bt(c.slice(1)),i,x,null,s,r,null,null)}m(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(a,n,r){var s;a==null&&(a=""),n==null&&(n=C0),r==null&&(r=Ge.wordlist());const i=mt.fromEntropy(ee(16),a,r);return G(s=q,He,Ut).call(s,i.computeSeed(),i).derivePath(n)}static fromMnemonic(a,n){var r;return n||(n=C0),G(r=q,He,Ut).call(r,a.computeSeed(),a).derivePath(n)}static fromPhrase(a,n,r,i){var x;n==null&&(n=""),r==null&&(r=C0),i==null&&(i=Ge.wordlist());const s=mt.fromPhrase(a,n,i);return G(x=q,He,Ut).call(x,s.computeSeed(),s).derivePath(r)}static fromSeed(a){var n;return G(n=q,He,Ut).call(n,a,null)}};Wt=new WeakSet,R0=function(){const a={address:this.address,privateKey:this.privateKey},n=this.mnemonic;return this.path&&n&&n.wordlist.locale==="en"&&n.password===""&&(a.mnemonic={path:this.path,locale:"en",entropy:n.entropy}),a},He=new WeakSet,Ut=function(a,n){m(_a(a),"invalid seed","seed","[REDACTED]");const r=g(a,"seed");m(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const i=g(It("sha512",_r,r)),s=new Bt(A(i.slice(0,32)));return new q(Q,s,"0x00000000",A(i.slice(32)),"m",0,0,n,null)},ae(q,He);let Kt=q;class Ht extends Kn{constructor(a,n,r,i,s,x,c,d,f){super(n,f);U(this,"publicKey");U(this,"fingerprint");U(this,"parentFingerprint");U(this,"chainCode");U(this,"path");U(this,"index");U(this,"depth");H0(a,Q,"HDNodeVoidWallet"),ye(this,{publicKey:r});const b=z0(vt(ht(r)),0,4);ye(this,{publicKey:r,fingerprint:b,parentFingerprint:i,chainCode:s,path:x,index:c,depth:d})}connect(a){return new Ht(Q,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,a)}get extendedKey(){return ge(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),_0(ce(["0x0488B21E",o0(this.depth,1),this.parentFingerprint,o0(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(a){const n=G0(a,"index");m(n<=4294967295,"invalid index","index",n);let r=this.path;r&&(r+="/"+(n&~he),n&he&&(r+="'"));const{IR:i,IL:s}=bn(n,this.chainCode,this.publicKey,null),x=Bt.addPoints(s,this.publicKey,!0),c=u0(x);return new Ht(Q,c,x,this.fingerprint,A(i),r,n,this.depth+1,this.provider)}derivePath(a){return pn(this,a)}}function la(e){try{if(JSON.parse(e).encseed)return!0}catch{}return!1}function ua(e,t){const a=JSON.parse(e),n=Yt(t),r=F(_(a,"ethaddr:string!")),i=rn(_(a,"encseed:string!"));m(i&&i.length%16===0,"invalid encseed","json",e);const s=g(we(n,n,2e3,32,"sha256")).slice(0,16),x=i.slice(0,16),c=i.slice(16),d=new q0(s,x),f=Cr(g(d.decrypt(c)));let b="";for(let y=0;y<f.length;y++)b+=String.fromCharCode(f[y]);return{address:r,privateKey:Ua(b)}}function ya(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}var jt,N0;const Ve=class Ve extends c0{constructor(t,a){typeof t=="string"&&!t.startsWith("0x")&&(t="0x"+t);let n=typeof t=="string"?new Bt(t):t;super(n,a)}connect(t){return new Ve(this.signingKey,t)}async encrypt(t,a){const n={address:this.address,privateKey:this.privateKey};return await on(n,t,{progressCallback:a})}encryptSync(t){const a={address:this.address,privateKey:this.privateKey};return fn(a,t)}static async fromEncryptedJson(t,a,n){var i;let r=null;return ba(t)?r=await Sr(t,a,n):la(t)&&(n&&(n(0),await ya(0)),r=ua(t,a),n&&(n(1),await ya(0))),G(i=Ve,jt,N0).call(i,r)}static fromEncryptedJsonSync(t,a){var r;let n=null;return ba(t)?n=Ur(t,a):la(t)?n=ua(t,a):m(!1,"invalid JSON wallet","json","[ REDACTED ]"),G(r=Ve,jt,N0).call(r,n)}static createRandom(t){const a=Kt.createRandom();return t?a.connect(t):a}static fromPhrase(t,a){const n=Kt.fromPhrase(t);return a?n.connect(a):n}};jt=new WeakSet,N0=function(t){if(m(t,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in t&&t.mnemonic&&t.mnemonic.locale==="en"){const n=mt.fromEntropy(t.mnemonic.entropy),r=Kt.fromMnemonic(n,t.mnemonic.path);if(r.address===t.address&&r.privateKey===t.privateKey)return r;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const a=new Ve(t.privateKey);return m(a.address===t.address,"address/privateKey mismatch","json","[ REDACTED ]"),a},ae(Ve,jt);let P0=Ve;const N={FHEVM_HANDLE_VERSION:0,DEFAULT_DURATION_DAYS:365,PUBLIC_DECRYPT_EIP712:{domain:{version:"1",name:"Decryption"},types:{PublicDecryptVerification:[{name:"ctHandles",type:"bytes32[]"},{name:"decryptedResult",type:"bytes"},{name:"extraData",type:"bytes"}]}},INPUT_VERIFICATION_EIP712:{domain:{version:"1",name:"InputVerification"},types:{CiphertextVerification:[{name:"ctHandles",type:"bytes32[]"},{name:"userAddress",type:"address"},{name:"contractAddress",type:"address"},{name:"contractChainId",type:"uint256"},{name:"extraData",type:"bytes"}]}},TEST_MNEMONIC:"test test test test test test test future home encrypt virtual machine",DEFAULT_KMS_SIGNERS_ACCOUNTS:{initialIndex:0,path:"m/44'/60'/1'/0"},DEFAULT_COPROCESSOR_SIGNERS_ACCOUNTS:{initialIndex:0,path:"m/44'/60'/2'/0"},DEFAULT_RELAYER_SIGNERS_ACCOUNTS:{initialIndex:0,path:"m/44'/60'/3'/0"},SEPOLIA_ETHEREUM_TESTNET_CHAINID:11155111,FHEVM_CORE_CONTRACTS_PACKAGE_NAME:"@fhevm/core-contracts",ZAMA_FHE_ORACLE_SOLIDITY_PACKAGE_NAME:"@zama-fhe/oracle-solidity"};Object.freeze(N);const Nr="fhevm_relayer_v1_public_decrypt",Lr="fhevm_relayer_v1_user_decrypt",kr="fhevm_relayer_v1_input_proof";function o(e,t){if(!e){const a="Fhevm assertion failed";throw t=t?a+": "+t:a,new l(t)}}function b0(e,t){o(Array.isArray(e),`${t??"value"} is not an array`)}function ln(e,t,a){if(typeof e!="object"||e===null)throw new l(`${a} must be a non-null object.`);for(const n of t){const r=e[n];if(r==null)throw new l(`Invalid ${a}. Missing '${n}' property.`);if(!Array.isArray(r))throw new l(`Expected '${n}' in ${a} to be an array.`)}}function F0(e,t,a){if(typeof e!="object"||e===null)throw new l(`${a} must be a non-null object.`);for(const n of t){const r=e[n];if(r==null)throw new l(`Invalid ${a}. Missing '${n}' property.`);if(typeof r!="object")throw new l(`Expected '${n}' in ${a} to be an object. Got ${typeof r} instead.`)}}class l extends Error{constructor(t,a){super(t,a),Object.defineProperty(this,"__isFhevmError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.__isFhevmError=!0}}async function X0(e,t,a){let n;if("send"in e&&typeof e.send=="function")n=await e.send(t,a);else if("request"in e&&typeof e.request=="function")n=await e.request({method:t,params:a});else throw new l("Invalid provider: must implement request() or send()");return n}function ha(e,t){return e.startsWith(t)?e.substring(t.length):e}function St(e){return e.startsWith("0x")?e:`0x${e}`}function wt(e){return e.startsWith("0x")?e.substring(2):e}function me(e,t){o(typeof e=="string",`${t??"value"} is not of type string, got ${typeof e} instead`)}function Dr(e,t){if(!Array.isArray(e))throw new l(`${t??"value"} is not an array of string`);for(let a=0;a<e.length;++a)o(typeof e[a]=="string",`${t??"value"}[${a}] is not of type string, got ${typeof e[a]} instead`)}function We(e,t,a){if(typeof e!="object"||e===null)throw new l(`${a} must be a non-null object.`);for(const n of t){const r=e[n];if(typeof r!="string")throw new l(`Expected '${n}' in ${a} to be a string, but got ${typeof r} instead.`)}}function h0(e,t,a){if(typeof e!="object"||e===null)throw new l(`${a} must be a non-null object.`);for(const n of t){const r=e[n];Dr(r,` ${a}.${n}`)}}const Br=0xffn,un=0xffffffffffffffffn,$r=0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffn;function Zt(e,t){try{const a=Hn(e,t);return G0(a)}catch{throw new l(`${t} is not a positive integer`)}}function Vr(e){return typeof e=="bigint"?!0:typeof e=="number"?Number.isInteger(e):!1}function J0(e){return Vr(e)?e>=0:!1}function Kr(e){if(e==null)throw new l("Missing value");let t=0n;if(typeof e=="bigint"){if(e!==1n&&e!==0n)throw new l("The value must be 1 or 0.");t=e}else if(typeof e=="number"){if(e!==1&&e!==0)throw new l("The value must be 1 or 0.");t=e===0?0n:1n}else if(typeof e=="boolean")t=e===!0?1n:0n;else throw new l("The value must be a boolean, a number or a bigint.");return t}function ma(e){if(!J0(e))throw new l(`Invalid bitLength argument (${e}), expecting a positive integer value.`);return(1n<<BigInt(e))-1n}function yn(e,t){mn(e,8,Br,t)}function hn(e,t){mn(e,256,$r,t)}function mn(e,t,a,n){o(typeof e=="bigint",`${n??"value"} is not of type bigint, got ${typeof e} instead`),o(e>=0&&e<=a,`${n??"value"} is larger than uint${t} maximum value, got ${e} > ${a}`)}function L0(e,t){o(typeof e=="number",`${t??"value"} is not of type number, got ${typeof e} instead`)}var B;(function(e){e[e.Bool=0]="Bool",e[e.Uint4=1]="Uint4",e[e.Uint8=2]="Uint8",e[e.Uint16=3]="Uint16",e[e.Uint32=4]="Uint32",e[e.Uint64=5]="Uint64",e[e.Uint128=6]="Uint128",e[e.Uint160=7]="Uint160",e[e.Uint256=8]="Uint256",e[e.Uint512=9]="Uint512",e[e.Uint1024=10]="Uint1024",e[e.Uint2048=11]="Uint2048",e[e.Uint2=12]="Uint2",e[e.Uint6=13]="Uint6",e[e.Uint10=14]="Uint10",e[e.Uint12=15]="Uint12",e[e.Uint14=16]="Uint14",e[e.Int2=17]="Int2",e[e.Int4=18]="Int4",e[e.Int6=19]="Int6",e[e.Int8=20]="Int8",e[e.Int10=21]="Int10",e[e.Int12=22]="Int12",e[e.Int14=23]="Int14",e[e.Int16=24]="Int16",e[e.Int32=25]="Int32",e[e.Int64=26]="Int64",e[e.Int128=27]="Int128",e[e.Int160=28]="Int160",e[e.Int256=29]="Int256",e[e.AsciiString=30]="AsciiString",e[e.Int512=31]="Int512",e[e.Int1024=32]="Int1024",e[e.Int2048=33]="Int2048",e[e.Uint24=34]="Uint24",e[e.Uint40=35]="Uint40",e[e.Uint48=36]="Uint48",e[e.Uint56=37]="Uint56",e[e.Uint72=38]="Uint72",e[e.Uint80=39]="Uint80",e[e.Uint88=40]="Uint88",e[e.Uint96=41]="Uint96",e[e.Uint104=42]="Uint104",e[e.Uint112=43]="Uint112",e[e.Uint120=44]="Uint120",e[e.Uint136=45]="Uint136",e[e.Uint144=46]="Uint144",e[e.Uint152=47]="Uint152",e[e.Uint168=48]="Uint168",e[e.Uint176=49]="Uint176",e[e.Uint184=50]="Uint184",e[e.Uint192=51]="Uint192",e[e.Uint200=52]="Uint200",e[e.Uint208=53]="Uint208",e[e.Uint216=54]="Uint216",e[e.Uint224=55]="Uint224",e[e.Uint232=56]="Uint232",e[e.Uint240=57]="Uint240",e[e.Uint248=58]="Uint248",e[e.Int24=59]="Int24",e[e.Int40=60]="Int40",e[e.Int48=61]="Int48",e[e.Int56=62]="Int56",e[e.Int72=63]="Int72",e[e.Int80=64]="Int80",e[e.Int88=65]="Int88",e[e.Int96=66]="Int96",e[e.Int104=67]="Int104",e[e.Int112=68]="Int112",e[e.Int120=69]="Int120",e[e.Int136=70]="Int136",e[e.Int144=71]="Int144",e[e.Int152=72]="Int152",e[e.Int168=73]="Int168",e[e.Int176=74]="Int176",e[e.Int184=75]="Int184",e[e.Int192=76]="Int192",e[e.Int200=77]="Int200",e[e.Int208=78]="Int208",e[e.Int216=79]="Int216",e[e.Int224=80]="Int224",e[e.Int232=81]="Int232",e[e.Int240=82]="Int240",e[e.Int248=83]="Int248"})(B||(B={}));const Z0=[{type:"Bool",value:0,supportedOperators:["and","or","xor","eq","ne","not","select","rand"],bitLength:2,clearMatchingType:"bool"},{type:"Uint4",value:1,supportedOperators:[],bitLength:4,clearMatchingType:"uint8"},{type:"Uint8",value:2,supportedOperators:["add","sub","mul","div","rem","and","or","xor","shl","shr","rotl","rotr","eq","ne","ge","gt","le","lt","min","max","neg","not","select","rand","randBounded"],bitLength:8,clearMatchingType:"uint8",aliases:[{type:"Bytes1",supportedOperators:[],clearMatchingType:"bytes1"}]},{type:"Uint16",value:3,supportedOperators:["add","sub","mul","div","rem","and","or","xor","shl","shr","rotl","rotr","eq","ne","ge","gt","le","lt","min","max","neg","not","select","rand","randBounded"],bitLength:16,clearMatchingType:"uint16",aliases:[{type:"Bytes2",supportedOperators:[],clearMatchingType:"bytes2"}]},{type:"Uint32",value:4,supportedOperators:["add","sub","mul","div","rem","and","or","xor","shl","shr","rotl","rotr","eq","ne","ge","gt","le","lt","min","max","neg","not","select","rand","randBounded"],bitLength:32,clearMatchingType:"uint32",aliases:[{type:"Bytes4",supportedOperators:[],clearMatchingType:""}]},{type:"Uint64",value:5,supportedOperators:["add","sub","mul","div","rem","and","or","xor","shl","shr","rotl","rotr","eq","ne","ge","gt","le","lt","min","max","neg","not","select","rand","randBounded"],bitLength:64,clearMatchingType:"uint64",aliases:[{type:"Bytes8",supportedOperators:[],clearMatchingType:"bytes8"}]},{type:"Uint128",value:6,supportedOperators:["add","sub","mul","div","rem","and","or","xor","shl","shr","rotl","rotr","eq","ne","ge","gt","le","lt","min","max","neg","not","select","rand","randBounded"],bitLength:128,clearMatchingType:"uint128",aliases:[{type:"Bytes16",supportedOperators:[],clearMatchingType:"bytes16"}]},{type:"Uint160",value:7,supportedOperators:[],bitLength:160,clearMatchingType:"uint160",aliases:[{type:"Address",supportedOperators:["eq","ne","select"],clearMatchingType:"address"},{type:"Bytes20",supportedOperators:[],clearMatchingType:"bytes20"}]},{type:"Uint256",value:8,supportedOperators:["and","or","xor","shl","shr","rotl","rotr","eq","ne","neg","not","select","rand","randBounded"],bitLength:256,clearMatchingType:"uint256",aliases:[{type:"Bytes32",supportedOperators:[],clearMatchingType:"bytes32"}]},{type:"Uint512",value:9,supportedOperators:[],bitLength:512,clearMatchingType:"bytes memory",aliases:[{type:"Bytes64",supportedOperators:["eq","ne","select","rand"],clearMatchingType:""}]},{type:"Uint1024",value:10,supportedOperators:[],bitLength:1024,clearMatchingType:"bytes memory",aliases:[{type:"Bytes128",supportedOperators:["eq","ne","select","rand"],clearMatchingType:""}]},{type:"Uint2048",value:11,supportedOperators:[],bitLength:2048,clearMatchingType:"bytes memory",aliases:[{type:"Bytes256",supportedOperators:["eq","ne","select","rand"],clearMatchingType:""}]},{type:"Uint2",value:12,supportedOperators:[],bitLength:2,clearMatchingType:"uint8"},{type:"Uint6",value:13,supportedOperators:[],bitLength:6,clearMatchingType:"uint8"},{type:"Uint10",value:14,supportedOperators:[],bitLength:10,clearMatchingType:"uint16"},{type:"Uint12",value:15,supportedOperators:[],bitLength:12,clearMatchingType:"uint16"},{type:"Uint14",value:16,supportedOperators:[],bitLength:14,clearMatchingType:"uint16"},{type:"Int2",value:17,supportedOperators:[],bitLength:2,clearMatchingType:"int8"},{type:"Int4",value:18,supportedOperators:[],bitLength:4,clearMatchingType:"int8"},{type:"Int6",value:19,supportedOperators:[],bitLength:6,clearMatchingType:"int8"},{type:"Int8",value:20,supportedOperators:[],bitLength:8,clearMatchingType:"int8"},{type:"Int10",value:21,supportedOperators:[],bitLength:10,clearMatchingType:"int16"},{type:"Int12",value:22,supportedOperators:[],bitLength:12,clearMatchingType:"int16"},{type:"Int14",value:23,supportedOperators:[],bitLength:14,clearMatchingType:"int16"},{type:"Int16",value:24,supportedOperators:[],bitLength:16,clearMatchingType:"int16"},{type:"Int32",value:25,supportedOperators:[],bitLength:32,clearMatchingType:"int32"},{type:"Int64",value:26,supportedOperators:[],bitLength:64,clearMatchingType:"int64"},{type:"Int128",value:27,supportedOperators:[],bitLength:128,clearMatchingType:"int128"},{type:"Int160",value:28,supportedOperators:[],bitLength:160,clearMatchingType:"int160"},{type:"Int256",value:29,supportedOperators:[],bitLength:256,clearMatchingType:"int256"},{type:"AsciiString",value:30,supportedOperators:[],bitLength:0,clearMatchingType:"string memory"},{type:"Int512",value:31,supportedOperators:[],bitLength:512,clearMatchingType:"bytes memory"},{type:"Int1024",value:32,supportedOperators:[],bitLength:1024,clearMatchingType:"bytes memory"},{type:"Int2048",value:33,supportedOperators:[],bitLength:2048,clearMatchingType:"bytes memory"},{type:"Uint24",value:34,supportedOperators:[],bitLength:24,clearMatchingType:"uint24",aliases:[{type:"Bytes3",supportedOperators:[],clearMatchingType:"bytes3"}]},{type:"Uint40",value:35,supportedOperators:[],bitLength:40,clearMatchingType:"uint40",aliases:[{type:"Bytes5",supportedOperators:[],clearMatchingType:"bytes5"}]},{type:"Uint48",value:36,supportedOperators:[],bitLength:48,clearMatchingType:"uint48",aliases:[{type:"Bytes6",supportedOperators:[],clearMatchingType:"bytes6"}]},{type:"Uint56",value:37,supportedOperators:[],bitLength:56,clearMatchingType:"uint56",aliases:[{type:"Bytes7",supportedOperators:[],clearMatchingType:""}]},{type:"Uint72",value:38,supportedOperators:[],bitLength:72,clearMatchingType:"uint72",aliases:[{type:"Bytes9",supportedOperators:[],clearMatchingType:"bytes9"}]},{type:"Uint80",value:39,supportedOperators:[],bitLength:80,clearMatchingType:"uint80",aliases:[{type:"Bytes10",supportedOperators:[],clearMatchingType:"bytes10"}]},{type:"Uint88",value:40,supportedOperators:[],bitLength:88,clearMatchingType:"uint88",aliases:[{type:"Bytes11",supportedOperators:[],clearMatchingType:"bytes11"}]},{type:"Uint96",value:41,supportedOperators:[],bitLength:96,clearMatchingType:"uint96",aliases:[{type:"Bytes12",supportedOperators:[],clearMatchingType:"bytes12"}]},{type:"Uint104",value:42,supportedOperators:[],bitLength:104,clearMatchingType:"uint104",aliases:[{type:"Bytes13",supportedOperators:[],clearMatchingType:"bytes13"}]},{type:"Uint112",value:43,supportedOperators:[],bitLength:112,clearMatchingType:"uint112",aliases:[{type:"Bytes14",supportedOperators:[],clearMatchingType:"bytes14"}]},{type:"Uint120",value:44,supportedOperators:[],bitLength:120,clearMatchingType:"uint120",aliases:[{type:"Bytes15",supportedOperators:[],clearMatchingType:"bytes15"}]},{type:"Uint136",value:45,supportedOperators:[],bitLength:136,clearMatchingType:"uint136",aliases:[{type:"Bytes17",supportedOperators:[],clearMatchingType:"bytes17"}]},{type:"Uint144",value:46,supportedOperators:[],bitLength:144,clearMatchingType:"uint144",aliases:[{type:"Bytes18",supportedOperators:[],clearMatchingType:"bytes18"}]},{type:"Uint152",value:47,supportedOperators:[],bitLength:152,clearMatchingType:"uint152",aliases:[{type:"Bytes19",supportedOperators:[],clearMatchingType:"bytes19"}]},{type:"Uint168",value:48,supportedOperators:[],bitLength:168,clearMatchingType:"uint168",aliases:[{type:"Bytes21",supportedOperators:[],clearMatchingType:"bytes21"}]},{type:"Uint176",value:49,supportedOperators:[],bitLength:176,clearMatchingType:"uint176",aliases:[{type:"Bytes22",supportedOperators:[],clearMatchingType:"bytes22"}]},{type:"Uint184",value:50,supportedOperators:[],bitLength:184,clearMatchingType:"uint184",aliases:[{type:"Bytes23",supportedOperators:[],clearMatchingType:"bytes23"}]},{type:"Uint192",value:51,supportedOperators:[],bitLength:192,clearMatchingType:"uint192",aliases:[{type:"Bytes24",supportedOperators:[],clearMatchingType:"24"}]},{type:"Uint200",value:52,supportedOperators:[],bitLength:200,clearMatchingType:"uint200",aliases:[{type:"Bytes25",supportedOperators:[],clearMatchingType:"25"}]},{type:"Uint208",value:53,supportedOperators:[],bitLength:208,clearMatchingType:"uint208",aliases:[{type:"Bytes26",supportedOperators:[],clearMatchingType:"26"}]},{type:"Uint216",value:54,supportedOperators:[],bitLength:216,clearMatchingType:"uint216",aliases:[{type:"Bytes27",supportedOperators:[],clearMatchingType:"27"}]},{type:"Uint224",value:55,supportedOperators:[],bitLength:224,clearMatchingType:"uint224",aliases:[{type:"Bytes28",supportedOperators:[],clearMatchingType:"28"}]},{type:"Uint232",value:56,supportedOperators:[],bitLength:232,clearMatchingType:"uint232",aliases:[{type:"Bytes29",supportedOperators:[],clearMatchingType:"bytes29"}]},{type:"Uint240",value:57,supportedOperators:[],bitLength:240,clearMatchingType:"uint240",aliases:[{type:"Bytes30",supportedOperators:[],clearMatchingType:"bytes30"}]},{type:"Uint248",value:58,supportedOperators:[],bitLength:248,clearMatchingType:"uint248",aliases:[{type:"Bytes31",supportedOperators:[],clearMatchingType:"bytes31"}]},{type:"Int24",value:59,supportedOperators:[],bitLength:24,clearMatchingType:"int24"},{type:"Int40",value:60,supportedOperators:[],bitLength:40,clearMatchingType:"int40"},{type:"Int48",value:61,supportedOperators:[],bitLength:48,clearMatchingType:"int48"},{type:"Int56",value:62,supportedOperators:[],bitLength:56,clearMatchingType:"int56"},{type:"Int72",value:63,supportedOperators:[],bitLength:72,clearMatchingType:"int72"},{type:"Int80",value:64,supportedOperators:[],bitLength:80,clearMatchingType:"int80"},{type:"Int88",value:65,supportedOperators:[],bitLength:88,clearMatchingType:"int88"},{type:"Int96",value:66,supportedOperators:[],bitLength:96,clearMatchingType:"int96"},{type:"Int104",value:67,supportedOperators:[],bitLength:104,clearMatchingType:"int104"},{type:"Int112",value:68,supportedOperators:[],bitLength:112,clearMatchingType:"int112"},{type:"Int120",value:69,supportedOperators:[],bitLength:120,clearMatchingType:"int120"},{type:"Int136",value:70,supportedOperators:[],bitLength:136,clearMatchingType:"int136"},{type:"Int144",value:71,supportedOperators:[],bitLength:144,clearMatchingType:"int144"},{type:"Int152",value:72,supportedOperators:[],bitLength:152,clearMatchingType:"int152"},{type:"Int168",value:73,supportedOperators:[],bitLength:168,clearMatchingType:"int168"},{type:"Int176",value:74,supportedOperators:[],bitLength:176,clearMatchingType:"int176"},{type:"Int184",value:75,supportedOperators:[],bitLength:184,clearMatchingType:"int184"},{type:"Int192",value:76,supportedOperators:[],bitLength:192,clearMatchingType:"int192"},{type:"Int200",value:77,supportedOperators:[],bitLength:200,clearMatchingType:"int200"},{type:"Int208",value:78,supportedOperators:[],bitLength:208,clearMatchingType:"int208"},{type:"Int216",value:79,supportedOperators:[],bitLength:216,clearMatchingType:"int216"},{type:"Int224",value:80,supportedOperators:[],bitLength:224,clearMatchingType:"int224"},{type:"Int232",value:81,supportedOperators:[],bitLength:232,clearMatchingType:"int232"},{type:"Int240",value:82,supportedOperators:[],bitLength:240,clearMatchingType:"int240"},{type:"Int248",value:83,supportedOperators:[],bitLength:248,clearMatchingType:"int248"}];function Hr(e){if(!J0(e))throw new l(`Invalid FheType ${e}`);if(e>=Z0.length)throw new l(`Invalid FheType ${e}`)}function zr(e){const t=k0(e);return Math.ceil(t/8)}function k0(e){return D0(e).bitLength}function D0(e){return Z0[e]}var p;(function(e){e[e.ebool=0]="ebool",e[e.euint4=1]="euint4",e[e.euint8=2]="euint8",e[e.euint16=3]="euint16",e[e.euint32=4]="euint32",e[e.euint64=5]="euint64",e[e.euint128=6]="euint128",e[e.eaddress=7]="eaddress",e[e.euint256=8]="euint256",e[e.ebytes64=9]="ebytes64",e[e.ebytes128=10]="ebytes128",e[e.ebytes256=11]="ebytes256"})(p||(p={}));const gn={ebool:p.ebool,euint4:p.euint4,euint8:p.euint8,euint16:p.euint16,euint32:p.euint32,euint64:p.euint64,euint128:p.euint128,eaddress:p.eaddress,euint256:p.euint256,ebytes64:p.ebytes64,ebytes128:p.ebytes128,ebytes256:p.ebytes256};Object.freeze(gn);p.ebool+"",p.euint4+"",p.euint8+"",p.euint16+"",p.euint32+"",p.euint64+"",p.euint128+"",p.euint256+"",p.eaddress+"",p.ebytes64+"",p.ebytes128+"",p.ebytes256+"";p.ebool,p.euint4,p.euint8,p.euint16,p.euint32,p.euint64,p.euint128,p.eaddress,p.euint256,p.ebytes64,p.ebytes128,p.ebytes256;const B0=Object.freeze([Object.freeze({type:p.ebool,fheType:B.Bool,name:"ebool",solidityTypeName:"bool",clearTextBitLength:1}),Object.freeze({type:p.euint4,fheType:B.Uint4,name:"euint4",solidityTypeName:"uint4",clearTextBitLength:4}),Object.freeze({type:p.euint8,fheType:B.Uint8,name:"euint8",solidityTypeName:"uint8",clearTextBitLength:8}),Object.freeze({type:p.euint16,fheType:B.Uint16,name:"euint16",solidityTypeName:"uint16",clearTextBitLength:16}),Object.freeze({type:p.euint32,fheType:B.Uint32,name:"euint32",solidityTypeName:"uint32",clearTextBitLength:32}),Object.freeze({type:p.euint64,fheType:B.Uint64,name:"euint64",solidityTypeName:"uint64",clearTextBitLength:64}),Object.freeze({name:"euint128",type:p.euint128,fheType:B.Uint128,solidityTypeName:"uint128",clearTextBitLength:128}),Object.freeze({name:"eaddress",type:p.eaddress,fheType:B.Uint160,solidityTypeName:"address",clearTextBitLength:160}),Object.freeze({name:"euint256",type:p.euint256,fheType:B.Uint256,solidityTypeName:"uint256",clearTextBitLength:256}),Object.freeze({name:"ebytes64",type:p.ebytes64,fheType:B.Uint512,solidityTypeName:"bytes",clearTextBitLength:512}),Object.freeze({name:"ebytes128",type:p.ebytes128,fheType:B.Uint1024,solidityTypeName:"bytes",clearTextBitLength:1024}),Object.freeze({name:"ebytes256",type:p.ebytes256,fheType:B.Uint2048,solidityTypeName:"bytes",clearTextBitLength:2048})]);function Gr(e){return!(!J0(e)||e>=B0.length)}function Wr(e){return e===p.ebytes64||e===p.ebytes128||e===p.ebytes256}function jr(e){return e===p.euint4||e===p.euint8||e===p.euint16||e===p.euint32||e===p.euint64||e===p.euint128||e===p.euint256}function wn(e){if(!Gr(e))throw new l(`Invalid FhevmType ${e}`)}function Yr(e){if(wn(e),e>=Z0.length)throw new l(`Cannot convert FhevmType: ${e} to FheType`);return e}function p0(e){return typeof e=="string"?B0[gn[e]]:B0[e]}function X(e,t){me(e,t),o(Vt(e),`${t??"value"}: '${e}' is not a valid address`)}function l0(e,t){b0(e,t);for(let a=0;a<e.length;++a)X(e[a],t?`${t}[${a}]`:void 0)}function qr(e,t){return X(e,t),o(Ra(e,20).toLocaleLowerCase()===de(e,20)),g(de(e,20))}function Fr(e){We(e,["durationDays","startTimestamp"],"RelayerV1UserDecryptValidity")}function Xr(e){We(e,["contractAddress","userAddress","ciphertextWithInputVerification","contractChainId","extraData"],"RelayerV1InputProofPayload")}function Jr(e){h0(e,["handles","signatures"],"RelayerV1InputProofResponse")}function Zr(e){const t=["ciphertextHandles"],a=["extraData"];h0(e,t,"RelayerV1PublicDecryptPayload"),We(e,a,"RelayerV1PublicDecryptResponse")}function Qr(e){const t=["signatures"],a=["decrypted_value"];h0(e,t,"RelayerV1PublicDecryptResponse"),We(e,a,"RelayerV1PublicDecryptResponse")}function ei(e){const t=["signature"],a=["payload"];We(e,t,"RelayerV1UserDecryptResponse"),F0(e,a,"RelayerV1UserDecryptResponse"),h0(e.payload,["decrypted_values"],"RelayerV1UserDecryptResponse")}function ti(e){const t=["handleContractPairs","contractAddresses"],a=["contractsChainId","publicKey","signature","userAddress","extraData"],n=["requestValidity"];We(e,a,"RelayerV1UserDecryptPayload"),ln(e,t,"RelayerV1UserDecryptPayload"),F0(e,n,"RelayerV1UserDecryptPayload"),Fr(e.requestValidity)}function ai(e){const t=["mockData"];Xr(e),F0(e,t,"MockRelayerV1InputProofPayload"),ni(e.mockData)}function ni(e){const t=["clearTextValuesBigIntHex","metadatas","fheTypes","fhevmTypes","random32List"];We(e,["aclContractAddress"],"MockRelayerData"),ln(e,t,"MockRelayerData")}async function ri(e,t){ai(t);const a=await X0(e,kr,[t]);return Jr(a),a}async function ii(e,t){ti(t);const a=await X0(e,Lr,[t]);return ei(a),{response:[a]}}async function si(e,t){Zr(t);const a=await X0(e,Nr,[t]);return Qr(a),{response:[a]}}var xi=function(e,t,a,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(e,a):r?r.value=a:t.set(e,a),a},ci=function(e,t,a,n){if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?n:a==="a"?n.call(e):n?n.value:t.get(e)},t0;class di{constructor(t){t0.set(this,void 0),xi(this,t0,t,"f")}get name(){return ci(this,t0,"f")}get properties(){return{address:this.address,contract:this.readonlyContract,package:this.package,contractName:this.name}}async _callOrThrow(t,a){try{return await t}catch(n){throw console.error(`invalid deployed ${this.name} contact at ${this.address}. Function ${a} does not exist.`),n}}}t0=new WeakMap;class In extends di{constructor(t){super(t)}get package(){return N.FHEVM_CORE_CONTRACTS_PACKAGE_NAME}}function vn(e,t,a,n){const r=new Map;t.forEach((i,s)=>{if(r.has(i)){const x=i;throw new l(`Duplicate ${n} signer address found: ${x} appears multiple times in recovered addresses`)}r.set(i,s)});for(const i of t)if(!e.includes(i))throw new l(`Invalid address found: ${i} is not in the list of ${n} signers`);return t.length>=a}function fi(e,t){o(e instanceof Uint8Array,`${t??"value"} is not of type Uint8Array`)}function Q0(e,t){oi(e,32,t)}function oi(e,t,a){me(e,a),o(e===de(e,t),`${a??"value"} : ${e} is not a valid bytes${t} string`)}function bi(e,t){ea(e,1,t)}function pi(e,t){ea(e,20,t)}function ga(e,t){ea(e,32,t)}function ea(e,t,a){fi(e,a),t===void 0?o(_a(e),`${a??"value"} : ${e} is not a valid bytes string`):o(e.length===t,`${a??"value"} : ${e} is not a valid bytes${t} Uint8Array. Expecting length ${t}, got ${e.length} instead`)}function $0(e,t){return g(de(e,t))}function Tn(...e){const t=e.reduce((r,i)=>r+i.length,0),a=new Uint8Array(t);let n=0;for(const r of e)a.set(r,n),n+=r.length;return a}function wa(e){const t=e.toString(16);return t.length%2?"0"+t:t}const Ia=e=>{const t=e.replace(/^(0x)/,"").match(/.{1,2}/g);return t?Uint8Array.from(t.map(a=>parseInt(a,16))):new Uint8Array},Qt=e=>`0x${e.reduce((t,a)=>t+a.toString(16).padStart(2,"0"),"")}`,li=new Pa([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[],name:"AlreadySigner",type:"error"},{inputs:[],name:"AtLeastOneSignerIsRequired",type:"error"},{inputs:[],name:"DeserializingInputProofFail",type:"error"},{inputs:[],name:"ECDSAInvalidSignature",type:"error"},{inputs:[{internalType:"uint256",name:"length",type:"uint256"}],name:"ECDSAInvalidSignatureLength",type:"error"},{inputs:[{internalType:"bytes32",name:"s",type:"bytes32"}],name:"ECDSAInvalidSignatureS",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"EmptyInputProof",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InitialSignersSetIsEmpty",type:"error"},{inputs:[],name:"InvalidChainId",type:"error"},{inputs:[],name:"InvalidHandleVersion",type:"error"},{inputs:[],name:"InvalidIndex",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"InvalidInputHandle",type:"error"},{inputs:[{internalType:"address",name:"signerRecovered",type:"address"}],name:"InvalidSigner",type:"error"},{inputs:[],name:"NotASigner",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"NotHostOwner",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"NotInitializingFromEmptyProxy",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{inputs:[{internalType:"uint256",name:"numSignatures",type:"uint256"}],name:"SignatureThresholdNotReached",type:"error"},{inputs:[],name:"SignaturesVerificationFailed",type:"error"},{inputs:[],name:"SignerNull",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{inputs:[],name:"ZeroSignature",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"}],name:"SignerAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"}],name:"SignerRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"EIP712_INPUT_VERIFICATION_TYPE",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"EIP712_INPUT_VERIFICATION_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"signer",type:"address"}],name:"addSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"cleanTransientStorage",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCoprocessorSigners",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getHandleVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[],name:"getThreshold",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getVersion",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"verifyingContractSource",type:"address"},{internalType:"uint64",name:"chainIDSource",type:"uint64"},{internalType:"address[]",name:"initialSigners",type:"address[]"}],name:"initializeFromEmptyProxy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"reinitializeV3",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"signer",type:"address"}],name:"removeSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"address",name:"contractAddress",type:"address"}],internalType:"struct FHEVMExecutor.ContextUserInputs",name:"context",type:"tuple"},{internalType:"bytes32",name:"inputHandle",type:"bytes32"},{internalType:"bytes",name:"inputProof",type:"bytes"}],name:"verifyCiphertext",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"nonpayable",type:"function"}]);var be=function(e,t,a,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(e,a):r?r.value=a:t.set(e,a),a},M=function(e,t,a,n){if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?n:a==="a"?n.call(e):n?n.value:t.get(e)},j,_t,pe,Be,k;class ta extends In{constructor(){super("InputVerifier"),j.set(this,void 0),_t.set(this,void 0),pe.set(this,void 0),Be.set(this,void 0),k.set(this,void 0)}static async create(t,a,n,r){X(a,"inputVerifierContractAddress");const i=new ta;return be(i,_t,a,"f"),be(i,j,new x0(a,n??li,t),"f"),be(i,k,r==null?void 0:r.eip712Domain,"f"),be(i,pe,r==null?void 0:r.signersAddresses,"f"),be(i,Be,r==null?void 0:r.threshold,"f"),await i._initialize(),i}get readonlyContract(){return o(M(this,j,"f")!==void 0,"InputVerifier wrapper is not initialized"),M(this,j,"f")}get interface(){return o(M(this,j,"f")!==void 0,"InputVerifier wrapper is not yet initialized"),M(this,j,"f").interface}async _initialize(){if(o(M(this,j,"f")!==void 0,"InputVerifier wrapper is not initialized"),!M(this,pe,"f")){const t=await M(this,j,"f").getCoprocessorSigners();be(this,pe,t,"f")}if(l0(M(this,pe,"f")),M(this,Be,"f")===void 0){const t=await M(this,j,"f").getThreshold();yn(t),be(this,Be,Number(t),"f")}if(M(this,k,"f")===void 0){const t=await M(this,j,"f").eip712Domain();o(t.length===7),me(t[0],"eip712Domain[0]"),me(t[1],"eip712Domain[1]"),me(t[2],"eip712Domain[2]"),hn(t[3],"eip712Domain[3]"),X(t[4],"eip712Domain[4]"),Q0(t[5],"eip712Domain[5]"),o(Array.isArray(t[6])&&t[6].length===0,"eip712Domain[6]"),be(this,k,{fields:Number(BigInt(t[0])),name:t[1],version:t[2],chainId:t[3],verifyingContract:t[4],salt:t[5]},"f")}o(M(this,k,"f").fields===15),o(M(this,k,"f").salt===y0),o(M(this,k,"f").name===N.INPUT_VERIFICATION_EIP712.domain.name),o(M(this,k,"f").version===N.INPUT_VERIFICATION_EIP712.domain.version)}get address(){return o(M(this,_t,"f")!==void 0,"InputVerifier wrapper not initialized"),M(this,_t,"f")}get gatewayChainId(){return o(M(this,k,"f")!==void 0,"InputVerifier wrapper not initialized"),M(this,k,"f").chainId}get gatewayInputVerificationAddress(){return o(M(this,k,"f")!==void 0,"InputVerifier wrapper not initialized"),M(this,k,"f").verifyingContract}get eip712Domain(){return o(M(this,k,"f")!==void 0,"InputVerifier wrapper not initialized"),M(this,k,"f")}getCoprocessorSigners(){return o(M(this,pe,"f")!==void 0,"InputVerifier wrapper not initialized"),M(this,pe,"f")}getThreshold(){return o(M(this,Be,"f")!==void 0,"InputVerifier wrapper not initialized"),M(this,Be,"f")}async assertMatchCoprocessorSigners(t){const a=this.getCoprocessorSigners();b0(t,"signers"),o(t.length===a.length,"signers.length === addresses.length");for(let n=0;n<a.length;++n){const r=await t[n].getAddress();o(a[n]===r,`addresses[${n}] === await signers[${n}].getAddress()`)}}verifySignatures(t,a,n,r,i,s){b0(s);const x=this.eip712Domain,c=s.map(d=>{const f=St(d);return O0({name:x.name,version:x.version,chainId:x.chainId,verifyingContract:x.verifyingContract},N.INPUT_VERIFICATION_EIP712.types,{ctHandles:t,userAddress:a,contractAddress:n,contractChainId:r,extraData:i},f)});if(!vn(this.getCoprocessorSigners(),c,this.getThreshold(),"coprocessor"))throw new l("Coprocessor signers threshold is not reached")}createCiphertextVerificationEIP712(t,a,n,r,i){X(r,"userAddress"),X(n,"contractAddress");const s=this.eip712Domain;return{domain:{chainId:s.chainId,name:s.name,version:s.version,verifyingContract:s.verifyingContract},types:N.INPUT_VERIFICATION_EIP712.types,message:{ctHandles:t.map(c=>Ra(de(c),32)),userAddress:r,contractAddress:n,contractChainId:a,extraData:i}}}}j=new WeakMap,_t=new WeakMap,pe=new WeakMap,Be=new WeakMap,k=new WeakMap;function ui(e,t,a){const n=e.length,r=t.length,i=wa(n);o(i.length===2);const s=wa(r);o(s.length===2);let x="0x"+i+s;for(let c=0;c<n;++c){const d=ha(e[c],"0x");o(d.length===2*32),x+=d}return t.map(c=>{const d=ha(c,"0x");if(d.length!==2*65)throw new l(`Invalid coprocessor signature: ${d}. Invalid length.`);x+=d}),x=ce([x,a]),x}var Le=function(e,t,a,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(e,a):r?r.value=a:t.set(e,a),a},S=function(e,t,a,n){if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?n:a==="a"?n.call(e):n?n.value:t.get(e)},Rt,Pt,Xe,$e,Nt,Je,re;class le{constructor(t,a,n,r,i,s,x){Rt.set(this,void 0),Pt.set(this,void 0),Xe.set(this,void 0),$e.set(this,void 0),Nt.set(this,void 0),Je.set(this,void 0),re.set(this,void 0),Le(this,Rt,t,"f"),Le(this,Pt,a,"f"),Le(this,Xe,n,"f"),Le(this,$e,r,"f"),Le(this,Nt,i,"f"),Le(this,Je,s,"f"),x!==void 0&&Le(this,re,x,"f")}get hash21(){return S(this,Rt,"f")}get chainId(){return S(this,Pt,"f")}get fhevmType(){return S(this,Xe,"f")}get fheType(){return S(this,$e,"f")}get version(){return S(this,Nt,"f")}get computed(){return S(this,Je,"f")}get index(){return S(this,re,"f")}get fhevmTypeInfo(){return p0(S(this,Xe,"f"))}get fheTypeInfo(){return D0(S(this,$e,"f"))}static fromBytes32Hex(t){if(o(typeof t=="string",`handle argument type mismatch. Got a ${typeof t}, expecting a string.`),!U0(t,32))throw new l(`Invalid handle ${t}, handle length sould be 66`);const a=t.slice(0,44),n=t.slice(44,46);let r=0;try{r=Zt("0x"+n)}catch{throw new l(`Invalid handle ${t}, Byte 21 does not contain a valid index`)}const i=r===255,s=t.slice(46,62);let x=0;try{x=Zt("0x"+s)}catch{throw new l(`Invalid handle ${t}, Byte 22-29 does not contain a valid chainId`)}const c=t.slice(62,64);let d,f;try{const E=Zt("0x"+c);d=E,f=E}catch{throw new l(`Invalid handle ${t}, Byte 30 does not contain the a valid (got 0x${c}).`)}Hr(d),wn(f);const b=t.slice(64,66);let y=0;try{y=Zt("0x"+b)}catch{throw new l(`Invalid handle ${t}, Byte 31 does not contain a valid version number.`)}if(y!==N.FHEVM_HANDLE_VERSION)throw new l(`Invalid handle ${t}, Byte 31 does not contain the expected version=${N.FHEVM_HANDLE_VERSION}, got ${y} instead`);return new le(a,x,f,d,y,i,r<255?r:void 0)}static verify(t,a){if(Q0(t,"handleBytes32"),t===y0)throw new l("Handle is not initialized");const n=le.fromBytes32Hex(t);if((a==null?void 0:a.chainId)!==void 0&&n.chainId!==a.chainId)throw new l(`Chain ID mismatch for handle ${t}, expected ${a.chainId}, but got ${n.chainId} instead.`);if((a==null?void 0:a.fhevmType)!==void 0&&n.fhevmType!==a.fhevmType){const r=n.fhevmTypeInfo,i=p0(a.fhevmType);throw new l(`Type mismatch for handle '${t}': expected '${i.name}', but got '${r.name}' instead.`)}if((a==null?void 0:a.fheType)!==void 0&&n.fheType!==a.fheType){const r=n.fheTypeInfo,i=D0(a.fheType);throw new l(`Type mismatch for handle '${t}': expected '${i.type}', but got '${r.type}' instead.`)}return n}toHandleBytes32(){o(Number(S(this,$e,"f"))===Number(S(this,Xe,"f"))),o(S(this,re,"f")===void 0&&S(this,Je,"f")||S(this,re,"f")!==void 0&&S(this,re,"f")<255&&!S(this,Je,"f"));const t=$0(S(this,Pt,"f"),32),a=t.subarray(24,32);o(t.length===32),o(a.length===8);const n=g(S(this,Rt,"f")),r=new Uint8Array(32);return r.set(n,0),r[21]=S(this,re,"f")===void 0?255:S(this,re,"f"),r.set(a,22),r[30]=S(this,$e,"f"),r[31]=S(this,Nt,"f"),r}toHandleBytes32Hex(){return A(this.toHandleBytes32())}static createInputHandle(t,a,n,r,i,s){const x=le._computeInputHash21(t,a,n,s);return new le(x,n,r,r,i,!1,s)}static _computeInputHash21(t,a,n,r){ga(t,"blobHash"),X(a,"aclAddress"),L0(r,"index"),L0(n,"chainId");const i=new Uint8Array([r]),s=qr(a,"ACL address"),x=$0(n,32);return bi(i),pi(s),ga(x),ze(Tn(t,i,s,x))}static computeHandlesHex(t,a,n,r,i){return le.computeHandles(t,a,n,r,i).map(A)}static computeHandles(t,a,n,r,i){if(BigInt(r)>un)throw new l("ChainId exceeds maximum allowed value (8 bytes)");const s=ze(t),x=g(s);return o(x.length===32),a.map((d,f)=>le.createInputHandle(x,n,r,d,i,f).toHandleBytes32())}}Rt=new WeakMap,Pt=new WeakMap,Xe=new WeakMap,$e=new WeakMap,Nt=new WeakMap,Je=new WeakMap,re=new WeakMap;const yi=new Pa([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[],name:"DeserializingDecryptionProofFail",type:"error"},{inputs:[],name:"ECDSAInvalidSignature",type:"error"},{inputs:[{internalType:"uint256",name:"length",type:"uint256"}],name:"ECDSAInvalidSignatureLength",type:"error"},{inputs:[{internalType:"bytes32",name:"s",type:"bytes32"}],name:"ECDSAInvalidSignatureS",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"EmptyDecryptionProof",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"KMSAlreadySigner",type:"error"},{inputs:[{internalType:"address",name:"invalidSigner",type:"address"}],name:"KMSInvalidSigner",type:"error"},{inputs:[{internalType:"uint256",name:"numSignatures",type:"uint256"}],name:"KMSSignatureThresholdNotReached",type:"error"},{inputs:[],name:"KMSSignerNull",type:"error"},{inputs:[],name:"KMSZeroSignature",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"NotHostOwner",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"NotInitializingFromEmptyProxy",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{inputs:[],name:"SignersSetIsEmpty",type:"error"},{inputs:[],name:"ThresholdIsAboveNumberOfSigners",type:"error"},{inputs:[],name:"ThresholdIsNull",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"newKmsSignersSet",type:"address[]"},{indexed:!1,internalType:"uint256",name:"newThreshold",type:"uint256"}],name:"NewContextSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"DECRYPTION_RESULT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"EIP712_PUBLIC_DECRYPT_TYPE",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"newSignersSet",type:"address[]"},{internalType:"uint256",name:"newThreshold",type:"uint256"}],name:"defineNewContext",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getKmsSigners",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getThreshold",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getVersion",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"verifyingContractSource",type:"address"},{internalType:"uint64",name:"chainIDSource",type:"uint64"},{internalType:"address[]",name:"initialSigners",type:"address[]"},{internalType:"uint256",name:"initialThreshold",type:"uint256"}],name:"initializeFromEmptyProxy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"reinitializeV3",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"threshold",type:"uint256"}],name:"setThreshold",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"handlesList",type:"bytes32[]"},{internalType:"bytes",name:"decryptedResult",type:"bytes"},{internalType:"bytes",name:"decryptionProof",type:"bytes"}],name:"verifyDecryptionEIP712KMSSignatures",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]);var Mt=function(e,t,a,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(e,a):r?r.value=a:t.set(e,a),a},C=function(e,t,a,n){if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?n:a==="a"?n.call(e):n?n.value:t.get(e)},Y,Lt,Ze,Qe,D;class aa extends In{constructor(){super("KMSVerifier"),Y.set(this,void 0),Lt.set(this,void 0),Ze.set(this,void 0),Qe.set(this,void 0),D.set(this,void 0)}static async create(t,a,n,r){if(X(a,"kmsVerifierContractAddress"),r!==void 0)throw new l("Not yet implemented");const i=new aa;return Mt(i,Lt,a,"f"),Mt(i,Y,new x0(a,n??yi,t),"f"),await i._initialize(),i}get readonlyContract(){return o(C(this,Y,"f")!==void 0,"KMSVerifier wrapper is not initialized"),C(this,Y,"f")}get interface(){return o(C(this,Y,"f")!==void 0,"KMSVerifier wrapper is not yet initialized"),C(this,Y,"f").interface}async _initialize(){o(C(this,Y,"f")!==void 0,"KMSVerifier wrapper is not initialized"),o(C(this,Ze,"f")===void 0,"KMSVerifier wrapper already initialized"),o(C(this,Qe,"f")===void 0,"KMSVerifier wrapper already initialized");const t=await C(this,Y,"f").getKmsSigners();l0(t),Mt(this,Ze,t,"f");const a=await C(this,Y,"f").getThreshold();if(yn(a),Mt(this,Qe,Number(a),"f"),C(this,D,"f")===void 0){const n=await C(this,Y,"f").eip712Domain();o(n.length===7),me(n[0],"eip712Domain[0]"),me(n[1],"eip712Domain[1]"),me(n[2],"eip712Domain[2]"),hn(n[3],"eip712Domain[3]"),X(n[4],"eip712Domain[4]"),Q0(n[5],"eip712Domain[5]"),Mt(this,D,{fields:Number(BigInt(n[0])),name:n[1],version:n[2],chainId:n[3],verifyingContract:n[4],salt:n[5]},"f")}o(C(this,D,"f").fields===15),o(C(this,D,"f").salt===y0),o(C(this,D,"f").name===N.PUBLIC_DECRYPT_EIP712.domain.name),o(C(this,D,"f").version===N.PUBLIC_DECRYPT_EIP712.domain.version)}get address(){return o(C(this,Lt,"f")!==void 0,"KMSVerifier wrapper not initialized"),C(this,Lt,"f")}get gatewayChainId(){return o(C(this,D,"f")!==void 0,"KMSVerifier wrapper not initialized"),C(this,D,"f").chainId}get gatewayDecryptionAddress(){return o(C(this,D,"f")!==void 0,"KMSVerifier wrapper not initialized"),C(this,D,"f").verifyingContract}get eip712Domain(){return o(C(this,D,"f")!==void 0,"KMSVerifier wrapper not initialized"),C(this,D,"f")}getKmsSignersAddresses(){return o(C(this,Ze,"f")!==void 0,"KMSVerifier wrapper not initialized"),C(this,Ze,"f")}async assertMatchKmsSigners(t){const a=this.getKmsSignersAddresses();b0(t,"signers"),o(t.length===a.length,"signers.length === addresses.length");for(let n=0;n<a.length;++n){const r=await t[n].getAddress();o(a[n]===r,`addresses[${n}] === await signers[${n}].getAddress()`)}}getThreshold(){return o(C(this,Qe,"f")!==void 0,"KMSVerifier wrapper not initialized"),C(this,Qe,"f")}createPublicDecryptVerificationEIP712(t,a,n){const r=this.eip712Domain;return{domain:{chainId:r.chainId,name:r.name,version:r.version,verifyingContract:r.verifyingContract},types:N.PUBLIC_DECRYPT_EIP712.types,message:{ctHandles:t,decryptedResult:a,extraData:n}}}}Y=new WeakMap,Lt=new WeakMap,Ze=new WeakMap,Qe=new WeakMap,D=new WeakMap;const hi=1568,mi=3168,V0=(hi+8)*2,K0=(mi+8)*2;function gi(e){if(e.publicKey=wt(e.publicKey),e.privateKey=wt(e.privateKey),!U0("0x"+e.publicKey,V0))throw new l("Invalid key pair's publicKey. Call FhevmInstance.generateKeyPair() to generate a valid FHEVM key pair.");if(!U0("0x"+e.privateKey,K0))throw new l("Invalid key pair's publicKey. Call FhevmInstance.generateKeyPair() to generate a valid FHEVM key pair.")}function wi(){const e=P0.createRandom(),t=wt(e.publicKey),a=wt(e.privateKey);o(t.length===a.length+2);const n=2*V0-t.length,r=2*K0-(2+a.length);let i=Math.floor(n/8);const s="deadbeef".repeat(i)+"0".repeat(n-i*8);i=Math.floor(r/8);const x="deadbeef".repeat(i)+"0".repeat(r-i*8),c="0x"+s+t,d="0x"+x+"00"+a;o(c.length===2+2*V0),o(d.length===2+2*K0),o(t.length===66),o(a.length===64);const f={publicKey:c,privateKey:d};return gi(f),f}const va=(e,t)=>(a,n,r,i,s)=>{const x="0x00";if(s&&!Vt(s))throw new Error("Invalid delegated account.");if(!Vt(e))throw new Error("Invalid verifying contract address.");if(!n.every(u=>Vt(u)))throw new Error("Invalid contract address.");const c=typeof a=="string"?a.startsWith("0x")?a:`0x${a}`:a,d=typeof r=="number"?r.toString():r,f=typeof i=="number"?i.toString():i,b=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],y={name:"Decryption",version:"1",chainId:t,verifyingContract:e};return s?{types:{EIP712Domain:b,DelegatedUserDecryptRequestVerification:[{name:"publicKey",type:"bytes"},{name:"contractAddresses",type:"address[]"},{name:"contractsChainId",type:"uint256"},{name:"startTimestamp",type:"uint256"},{name:"durationDays",type:"uint256"},{name:"extraData",type:"bytes"},{name:"delegatedAccount",type:"address"}]},primaryType:"DelegatedUserDecryptRequestVerification",domain:y,message:{publicKey:c,contractAddresses:n,contractsChainId:t,startTimestamp:d,durationDays:f,extraData:x,delegatedAccount:s}}:{types:{EIP712Domain:b,UserDecryptRequestVerification:[{name:"publicKey",type:"bytes"},{name:"contractAddresses",type:"address[]"},{name:"contractsChainId",type:"uint256"},{name:"startTimestamp",type:"uint256"},{name:"durationDays",type:"uint256"},{name:"extraData",type:"bytes"}]},primaryType:"UserDecryptRequestVerification",domain:y,message:{publicKey:c,contractAddresses:n,contractsChainId:t,startTimestamp:d,durationDays:f,extraData:x}}};var ke=function(e,t,a,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(e,a):r?r.value=a:t.set(e,a),a},v=function(e,t,a,n){if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?n:a==="a"?n.call(e):n?n.value:t.get(e)},ie,et,tt,at,nt,rt,it,a0,kt,n0;class xe{constructor(t,a,n,r,i,s){if(ie.set(this,[]),et.set(this,[]),tt.set(this,[]),at.set(this,0),nt.set(this,void 0),rt.set(this,void 0),it.set(this,void 0),a0.set(this,void 0),kt.set(this,void 0),n0.set(this,void 0),BigInt(a)>un)throw new Error("ChainId exceeds maximum allowed value (8 bytes)");ke(this,a0,t,"f"),ke(this,nt,a,"f"),ke(this,rt,n,"f"),ke(this,it,r,"f"),ke(this,kt,i,"f"),ke(this,n0,s,"f")}get userAddress(){return v(this,it,"f")}get contractAddress(){return v(this,rt,"f")}_checkAddFheBits(t){if(o(t>=0),v(this,at,"f")+t>xe.MAX_FHE_BITS)throw Error("Packing more than 2048 bits in a single input ciphertext is unsupported");if(v(this,ie,"f").length+1>xe.MAX_VAR_COUNT)throw Error("Packing more than 256 variables in a single input ciphertext is unsupported")}_addClearTextValueFheBitsPair(t,a){const n=Yr(a),r=k0(n);this._checkAddFheBits(r),v(this,et,"f").push(a),v(this,tt,"f").push(n),v(this,ie,"f").push(t),ke(this,at,v(this,at,"f")+r,"f"),o(v(this,ie,"f").length<=xe.MAX_VAR_COUNT),o(v(this,at,"f")<=xe.MAX_FHE_BITS),o(v(this,ie,"f").length===v(this,tt,"f").length),o(v(this,ie,"f").length===v(this,et,"f").length)}_addBytes(t,a){o(Wr(a));const n=p0(a),r=k0(n.fheType),i=n.clearTextBitLength;o(i===r),o(r%8===0);const s=r/8;if(t.length>s)throw new l(`Uncorrect length of input Uint8Array, should be ${s} for an ${n.name}`);const x=$t(t),c=ma(i);return o(t.length*8===r),o(x<=c),this._addClearTextValueFheBitsPair(x,a),this}_addUint(t,a){o(jr(a));const n=p0(a),r=n.clearTextBitLength;if(t<0)throw new l(`Invalid unsigned integer value ${t}`);const i=BigInt(t),s=ma(r);if(i>s)throw new l(`Invalid ${n.solidityTypeName} value: ${t}, it exceeds the maximum allowed value of ${s}.`);return this._addClearTextValueFheBitsPair(i,a),this}addBool(t){const a=Kr(t);return this._addClearTextValueFheBitsPair(a,p.ebool),this}add8(t){return this._addUint(t,p.euint8)}add16(t){return this._addUint(t,p.euint16)}add32(t){return this._addUint(t,p.euint32)}add64(t){return this._addUint(t,p.euint64)}add128(t){return this._addUint(t,p.euint128)}addAddress(t){if(!Vt(t))throw new Error("Invalid address value: ${value}.");const a=F(t);return this._addClearTextValueFheBitsPair(a,p.eaddress),this}add256(t){return this._addUint(t,p.euint256)}addBytes64(t){return this._addBytes(t,p.ebytes64)}addBytes128(t){return this._addBytes(t,p.ebytes128)}addBytes256(t){return this._addBytes(t,p.ebytes256)}_toMockFhevmRelayerV1InputProofPayload(t){const a=v(this,ie,"f").length,n=[],r=[],i=[],s=[];for(let f=0;f<a;++f){const b=BigInt(v(this,ie,"f")[f]);r.push(b),n.push(de(b)),i.push(ee(32)),s.push({blockNumber:0,index:0,transactionHash:y0})}const x=xe._computeMockCiphertextWithZKProof(r,v(this,tt,"f"),i),c={clearTextValuesBigIntHex:n,metadatas:s,fheTypes:v(this,tt,"f"),fhevmTypes:v(this,et,"f"),aclContractAddress:v(this,kt,"f"),random32List:i.map(A)};return{contractAddress:v(this,rt,"f"),userAddress:v(this,it,"f"),ciphertextWithInputVerification:A(x),contractChainId:"0x"+v(this,nt,"f").toString(16),extraData:t,mockData:c}}static _computeMockCiphertextWithZKProof(t,a,n){let r=new Uint8Array(0);const i=t.length;o(n.length===i),o(a.length===i);for(let s=0;s<i;++s){const x=t[s],c=zr(a[s]),d=new Uint8Array([a[s]]),f=$0(x,c),b=n[s];r=Tn(r,d,f,b)}return g(ze(r))}async encrypt(){const t="0x00",a=this._toMockFhevmRelayerV1InputProofPayload(t),n=g(a.ciphertextWithInputVerification),r=await ri(v(this,a0,"f"),a),i=le.computeHandles(n,v(this,et,"f"),v(this,kt,"f"),v(this,nt,"f"),N.FHEVM_HANDLE_VERSION);v(this,n0,"f").verifySignatures(i,v(this,it,"f"),v(this,rt,"f"),v(this,nt,"f"),t,r.signatures);const s=ui(r.handles,r.signatures,t);return{handles:i,inputProof:s0(s)}}getBits(){throw new l("ZKInput interface method: Not supported in mock mode")}}ie=new WeakMap,et=new WeakMap,tt=new WeakMap,at=new WeakMap,nt=new WeakMap,rt=new WeakMap,it=new WeakMap,a0=new WeakMap,kt=new WeakMap,n0=new WeakMap;Object.defineProperty(xe,"MAX_FHE_BITS",{enumerable:!0,configurable:!0,writable:!0,value:2048});Object.defineProperty(xe,"MAX_VAR_COUNT",{enumerable:!0,configurable:!0,writable:!0,value:256});const Ta={0:2,2:8,3:16,4:32,5:64,6:128,7:160,8:256};function Aa(e){let t=0;for(const a of e){if(a.length!==66)throw new Error(`Handle ${a} is not of valid length`);const n=a.slice(-4,-2).toLowerCase(),r=parseInt(n,16);if(!(r in Ta))throw new Error(`Handle ${a} is not of valid type`);if(t+=Ta[r],t>2048)throw new Error("Cannot decrypt more than 2048 encrypted bits in a single request")}return t}const Ii={0:"bool",2:"uint256",3:"uint256",4:"uint256",5:"uint256",6:"uint256",7:"address",8:"uint256"};function vi(e,t){let a=[];for(const d of e){const f=d.slice(-4,-2).toLowerCase(),b=parseInt(f,16);a.push(b)}const n="0x"+"00".repeat(32)+t.slice(2)+"00".repeat(32),r=a.map(d=>Ii[d]),x=new zn().decode(["uint256",...r,"bytes[]"],n).slice(1,1+a.length);let c={};return e.forEach((d,f)=>c[d]=x[f]),c}const Ea=10,Ma=365n;function Ti(e,t){if(t===BigInt(0))throw new l("durationDays is null");if(t>Ma)throw new l(`durationDays is above max duration of ${Ma}`);const a=BigInt(Math.floor(Date.now()/1e3));if(e>a)throw new l("startTimestamp is set in the future");const n=t*BigInt(86400);if(e+n<a)throw new l("User decrypt request has expired")}function Ai(e,t){return t===0?e===BigInt(1):t===7?F("0x"+e.toString(16).padStart(40,"0")):t===9?"0x"+e.toString(16).padStart(128,"0"):t===10?"0x"+e.toString(16).padStart(256,"0"):t===11?"0x"+e.toString(16).padStart(512,"0"):e}function Ei(e,t){let a=[];for(const r of e){const i=r.slice(-4,-2).toLowerCase(),s=parseInt(i,16);a.push(s)}let n={};return e.forEach((r,i)=>n[r]=Ai(t[i],a[i])),n}function Mi(e){const t=e.length;if(t===0)throw new l("contractAddresses is empty");if(t>Ea)throw new l(`contractAddresses max length of ${Ea} exceeded`)}var W=function(e,t,a,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(e,a):r?r.value=a:t.set(e,a),a},T=function(e,t,a,n){if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?n:a==="a"?n.call(e):n?n.value:t.get(e)},st,Dt,xt,ct,r0,dt,ft,ot,se,bt,i0;class ue{constructor(t,a){st.set(this,void 0),Dt.set(this,void 0),xt.set(this,void 0),ct.set(this,void 0),r0.set(this,void 0),dt.set(this,void 0),ft.set(this,void 0),ot.set(this,void 0),se.set(this,void 0),bt.set(this,void 0),i0.set(this,void 0),X(t.verifyingContractAddressInputVerification,"config.verifyingContractAddressInputVerification"),X(t.verifyingContractAddressDecryption,"config.verifyingContractAddressDecryption"),L0(t.gatewayChainId,"config.gatewayChainId"),W(this,st,a.relayerProvider,"f"),W(this,Dt,a.readonlyEthersProvider,"f"),W(this,xt,t.chainId,"f"),W(this,ct,t.gatewayChainId,"f"),W(this,r0,t.verifyingContractAddressInputVerification,"f"),W(this,dt,t.verifyingContractAddressDecryption,"f"),W(this,ft,t.chainId,"f"),W(this,ot,t.aclContractAddress,"f"),W(this,se,a.kmsVerifier,"f"),W(this,bt,a.inputVerifier,"f"),W(this,i0,va(T(this,dt,"f"),T(this,ft,"f")),"f")}get chainId(){return T(this,xt,"f")}static async create(t,a,n){const r=await aa.create(a,n.kmsContractAddress),i=await ta.create(a,n.inputVerifierContractAddress);return new ue(n,{relayerProvider:t,readonlyEthersProvider:a,inputVerifier:i,kmsVerifier:r})}static createEIP712(t,a,n,r,i,s){l0(a,"contractAddresses");const c=va(i,s)(t,a,n,r);return o(c.domain.version===N.PUBLIC_DECRYPT_EIP712.domain.version.toString()),o(c.domain.name===N.PUBLIC_DECRYPT_EIP712.domain.name),c}createEIP712(t,a,n,r){l0(a,"contractAddresses");const i=T(this,i0,"f").call(this,t,a,n,r);return o(BigInt(T(this,ct,"f"))===T(this,se,"f").eip712Domain.chainId),o(i.domain.verifyingContract===T(this,se,"f").eip712Domain.verifyingContract),o(i.domain.version===T(this,se,"f").eip712Domain.version),o(i.domain.name===T(this,se,"f").eip712Domain.name),o(BigInt(i.domain.chainId)===BigInt(T(this,ft,"f"))),i}createEncryptedInput(t,a){return o(T(this,r0,"f")===T(this,bt,"f").eip712Domain.verifyingContract),o(BigInt(T(this,ct,"f"))===T(this,bt,"f").eip712Domain.chainId),new xe(T(this,st,"f"),T(this,xt,"f"),t,a,T(this,ot,"f"),T(this,bt,"f"))}generateKeypair(){return wi()}getPublicKey(){throw new l("Not supported in mock mode")}getPublicParams(t){throw new l("Not supported in mock mode")}async publicDecrypt(t){const a="0x00";for(let h=0;h<t.length;++h)o(typeof t[h]=="string"||t[h]instanceof Uint8Array,"handle is not a string or a Uint8Array");const n=t.map(h=>Qt(typeof h=="string"?Ia(h):h));Aa(n),await ue.verifyPublicACLPermissions(T(this,Dt,"f"),T(this,ot,"f"),n);const r={ciphertextHandles:n,extraData:a},s=(await si(T(this,st,"f"),r)).response[0],x=St(s.decrypted_value),c=s.signatures.map(St),d={name:N.PUBLIC_DECRYPT_EIP712.domain.name,version:N.PUBLIC_DECRYPT_EIP712.domain.version,chainId:T(this,ct,"f"),verifyingContract:T(this,dt,"f")},f=N.PUBLIC_DECRYPT_EIP712.types,b="0x00",y=c.map(h=>(o(h.startsWith("0x")),O0(d,f,{ctHandles:t,decryptedResult:x,extraData:b},h)));if(!vn(T(this,se,"f").getKmsSignersAddresses(),y,T(this,se,"f").getThreshold(),"KMS"))throw Error("KMS signers threshold is not reached");return vi(n,x)}async userDecrypt(t,a,n,r,i,s,x,c){const d="0x00";for(let w=0;w<t.length;++w)o(typeof t[w].handle=="string"||t[w].handle instanceof Uint8Array,"handle is not a string or a Uint8Array");const f=t.map(w=>({handle:typeof w.handle=="string"?Qt(Ia(w.handle)):Qt(w.handle),contractAddress:w.contractAddress}));Aa(f.map(w=>w.handle)),Ti(BigInt(x),BigInt(c)),await ue.verifyUserACLPermissions(T(this,Dt,"f"),T(this,ot,"f"),f,s),Mi(i),ue.verifyHandleContractAddresses(f,i),await ue.verifyUserDecryptSignature(n,r,i,s,x,c,T(this,dt,"f"),T(this,ft,"f"));const b={handleContractPairs:f,requestValidity:{startTimestamp:x.toString(),durationDays:c.toString()},contractsChainId:T(this,xt,"f").toString(),contractAddresses:i.map(w=>F(w)),userAddress:F(s),signature:wt(r),publicKey:wt(n),extraData:d},h=(await ii(T(this,st,"f"),b)).response[0].payload.decrypted_values.map($t);return Ei(f.map(w=>w.handle),h)}static async verifyUserDecryptSignature(t,a,n,r,i,s,x,c){t=St(t),a=St(a);const d=ue.createEIP712(t,n,i,s,x,c),f={};f[d.primaryType]=d.types[d.primaryType];const b=O0(d.domain,f,d.message,a),y=F(b),u=F(r);if(y!==u)throw new l("Invalid EIP-712 signature!")}static async verifyPublicACLPermissions(t,a,n){const r=["function isAllowedForDecryption(bytes32 handle) view returns (bool)"],i=new x0(a,r,t),s=n.map(async x=>{const c=de($t(x),32);if(!await i.isAllowedForDecryption(c))throw new l(`Handle ${x} is not allowed for public decryption!`)});return Promise.all(s).catch(x=>{throw x})}static async verifyUserACLPermissions(t,a,n,r){const i=["function persistAllowed(bytes32 handle, address account) view returns (bool)"],s=new x0(a,i,t),x=n.map(async({handle:c,contractAddress:d})=>{const f=de($t(c),32),b=await s.persistAllowed(f,r),y=await s.persistAllowed(f,d);if(!b)throw new l(`User ${r} is not authorized to user decrypt handle ${c}!`);if(!y)throw new l(`dapp contract ${d} is not authorized to user decrypt handle ${c}!`);if(r===d)throw new l(`userAddress ${r} should not be equal to contractAddress when requesting decryption!`)});return Promise.all(x).catch(c=>{throw c})}static verifyHandleContractAddresses(t,a){const n=new Set;for(let r=0;r<a.length;++r){const i=a[r].toLowerCase();n.has(i)||n.add(i)}for(let r=0;r<t.length;++r)if(!n.has(t[r].contractAddress.toLowerCase()))throw new l(`Contract address ${t[r].contractAddress} associated to handle ${t[r].handle} is not listed in the contractAddresses array argument.`)}}st=new WeakMap,Dt=new WeakMap,xt=new WeakMap,ct=new WeakMap,r0=new WeakMap,dt=new WeakMap,ft=new WeakMap,ot=new WeakMap,se=new WeakMap,bt=new WeakMap,i0=new WeakMap;const Ui=async e=>{const t=new Gn(e.rpcUrl);return await ue.create(t,t,{aclContractAddress:e.metadata.ACLAddress,chainId:e.chainId,gatewayChainId:55815,inputVerifierContractAddress:e.metadata.InputVerifierAddress,kmsContractAddress:e.metadata.KMSVerifierAddress,verifyingContractAddressDecryption:"0x5ffdaAB0373E62E2ea2944776209aEf29E631A64",verifyingContractAddressInputVerification:"0x812b06e1CDCE800494b79fFE4f925A504a9A9810"})};export{Ui as fhevmMockCreateInstance};
